<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-jsx-7a4017099845f4526de5.js" as="script"/><link rel="preload" href="/component---src-templates-lesson-jsx-772e29a295b5ea77ee8f.js" as="script"/><link rel="preload" href="/path---docs-authoring-relationships-b0068624f9ed51aa34de.js" as="script"/><link rel="preload" href="/app-97da983620473125d543.js" as="script"/><link rel="preload" href="/commons-a2102892feac76f8cd93.js" as="script"/><style type="text/css" data-styled-components="jvfQJd izfjHs bcCrHd bsoOjX fuwqKj iUvEoY fuWFRV kteKgX efUMmA kTmsXR efHnSd fshBww hFnaBo iCEMyR hTJcdm fhRzEj fxiKRU" data-styled-components-is-local="true">/* sc-component-id: sc-bdVaJa */

.fuwqKj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;margin-top:10px;}
/* sc-component-id: sc-bwzfXH */

.iUvEoY{margin-left:25px;color:white;}.iUvEoY:hover{color:rgba(0,0,0,0.2);border-bottom:none;}
/* sc-component-id: sc-htpNat */

.bsoOjX{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:calc(100% - 50px);background:#399cd3;position:fixed;}.bsoOjX .nav-wrapper{padding-left:4px;padding-right:4px;}.bsoOjX .nav-wrapper:last-child .nav-link{margin-right:0;}.bsoOjX a.nav-link:hover span{border-bottom:1px solid white !important;}.bsoOjX .nav-link{font-size:1.6rem;margin-right:10px;line-height:50px;font-weight:200;color:white;display:inline-block;}.bsoOjX .nav-link.active-nav-link span{border-bottom:1px solid white;}@media screen and (max-width:600px){.bsoOjX .nav-link{font-size:1.4rem;margin-right:7px;}}@media screen and (max-width:600px){.bsoOjX{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;left:0;width:100%;padding:0 10px;z-index:2;}.bsoOjX .user-links{display:none;}}
/* sc-component-id: sc-bxivhb */

.bcCrHd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background:#399cd3;padding:25px;}
/* sc-component-id: sc-gzVnrw */

.efUMmA{padding:25px;margin:0;}
/* sc-component-id: sc-htoDjs */

.kTmsXR{list-style:none;margin:0;}.kTmsXR .head{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;}
/* sc-component-id: sc-dnqmqq */

.hFnaBo{list-style:none;}
/* sc-component-id: sc-iwsKbI */

.hTJcdm{display:inline-block;font-weight:200;color:#35495E;margin:0;line-height:1.5;border-bottom:1px solid transparent;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: sc-gZMcBi */

.efHnSd{margin:0;}.efHnSd .chevron{height:15px;width:15px;color:#35495E;-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;}.efHnSd .chevron-open{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);}
/* sc-component-id: sc-gqjmRU */

.iCEMyR{margin:0;}.iCEMyR a:hover,.iCEMyR .active-toc-link{border-bottom:1px solid #35495E;}
/* sc-component-id: sc-VigVT */

.fshBww{font-weight:200;font-size:2.1rem;color:#399cd3;border-left:3px solid #bce0f5;padding-left:1em;}
/* sc-component-id: sc-jTzLTM */

.fhRzEj{padding:25px;margin:0;}
/* sc-component-id: sc-fjdhpX */

.fxiKRU{font-weight:200;color:#399cd3;border-left:3px solid #bce0f5;padding-left:1em;}
/* sc-component-id: sc-jzJRlG */

.jvfQJd{height:100vh;display:grid;grid-template-rows:50px 1fr;grid-template-columns:1fr 320px;}@media screen and (max-width:768px){.jvfQJd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:inherit;}}
/* sc-component-id: sc-cSHVUG */

.fuWFRV{grid-column:1 / 2;grid-row:2 / 3;justify-self:center;max-width:700px;padding:25px;}.fuWFRV.hidden-toc{grid-column:1 / 3;}@media screen and (max-width:768px){.fuWFRV{-webkit-order:3;-ms-flex-order:3;order:3;}.fuWFRV.hidden-toc{margin-top:50px;}}.fuWFRV > div{max-width:1440px;margin:auto;}.fuWFRV > div > h1{color:#35495E;}@media screen and (max-width:768px){.fuWFRV > div > h1{margin-top:0;}}@media screen and (max-width:600px){.fuWFRV{max-width:100%;}}
/* sc-component-id: sc-kAzzGY */

.izfjHs{grid-column:1 / 3;grid-row:1 / 2;z-index:2;position:fixed;width:100%;}@media screen and (max-width:768px){.izfjHs{-webkit-order:1;-ms-flex-order:1;order:1;}}
/* sc-component-id: sc-chPdSV */

.kteKgX{grid-column:2 / 3;grid-row:2 / 3;background:none;overflow-y:auto;position:fixed;right:0;width:320px;height:calc(100vh - 50px);top:50px;}.kteKgX.hidden-toc > div:first-child{display:none;}@media screen and (max-width:768px){.kteKgX{-webkit-order:2;-ms-flex-order:2;order:2;top:0;margin-top:50px;position:relative;height:auto;width:100%;overflow:inherit;}}
</style><title data-react-helmet="true">Relationships | Automate Routine Programming</title><meta data-react-helmet="true" name="description" content="Relationships Most of the code in any project is related.  Data models determine the structure of your queries The queries you write affect…"/><meta data-react-helmet="true" name="image" content="https://useoptic.comnull"/><meta data-react-helmet="true" property="og:url" content="https://useoptic.com//docs/authoring/relationships"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Relationships"/><meta data-react-helmet="true" property="og:description" content="Relationships Most of the code in any project is related.  Data models determine the structure of your queries The queries you write affect…"/><meta data-react-helmet="true" property="og:image" content="https://useoptic.comnull"/><meta data-react-helmet="true" property="fb:app_id" content="1825356251115265"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="useoptic"/><meta data-react-helmet="true" name="twitter:title" content="Relationships"/><meta data-react-helmet="true" name="twitter:description" content="Relationships Most of the code in any project is related.  Data models determine the structure of your queries The queries you write affect…"/><meta data-react-helmet="true" name="twitter:image" content="https://useoptic.comnull"/><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https://useoptic.com/","name":"Relationships","alternateName":"Optic Automate Programming"},[{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://useoptic.com//docs/authoring/relationships","name":"Relationships","image":"https://useoptic.comnull"}}]},{"@context":"http://schema.org","@type":"BlogPosting","url":"https://useoptic.com/","name":"Relationships","alternateName":"Optic Automate Programming","headline":"Relationships","image":{"@type":"ImageObject","url":"https://useoptic.comnull"},"description":"Relationships Most of the code in any project is related.  Data models determine the structure of your queries The queries you write affect…"}]]</script><link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,+400i,+700,+700i|Space+Mono:400,700" rel="stylesheet"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#c62828"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><style id="gatsby-inlined-css">*{box-sizing:border-box;margin:0;padding:0}table{border-collapse:collapse}table,td,th{border:1px solid #000;padding:5px}html{font-size:10px}a,body,h1,h2,h3,h4,h5,h6,li,p,ul{font-family:Roboto,Helvetica Neue,sans-serif}dl,h1,h2,h3,h4,h5,h6,ol,p,ul{margin:30px 0;font-weight:300}dd,dt,li,li>*{margin:10px 0}code,pre{font-family:Space Mono,monospace}h1{font-size:4rem}h2{font-size:3.5rem}h3{font-size:3rem}h4{font-size:2.4rem}h5{font-size:2rem}h6{font-size:1.6rem}a,dd,dt,li,p,th,tr{font-size:1.8rem;line-height:1.4em}a{color:#2973b7;text-decoration:none}a:hover{cursor:pointer}ol,ul{margin-left:20px}iframe,img{max-width:100%}.gatsby-highlight code[class*=language-],.gatsby-highlight pre[class*=language-]{box-shadow:none}.home-page-img{height:70px}.home-page-gif,.home-page-img{width:100%;background-size:contain;background-repeat:no-repeat;background-position:50%;margin-top:20px;margin-bottom:30px}.home-page-gif{height:300px}.ide-image{padding-left:20px}.language-text{border-radius:0!important;box-shadow:none}.ace_content{padding:5px}.gatsby-highlight{padding-bottom:30px}.language-text{color:#000!important}code[class*=language-],pre[class*=language-]{color:#000;background:none;font-family:Space Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.9;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:0}:not(pre)>code[class*=language-],pre[class*=language-]{background:#ebedef}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#b5bec3}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#efc090}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#dc78dc}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.function{color:#bed6ff}.token.keyword{color:#00d0d0}.token.important,.token.regex{color:#ccdf32}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.social-links{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-ms-flex-line-pack:center;align-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:15px 0}.social-links>div{margin:5px 15px}.share-count{text-align:center}code[class*=language-],pre[class*=language-]{font-family:Consolas,Menlo,Monaco,Andale Mono WT,Andale Mono,Lucida Console,Lucida Sans Typewriter,DejaVu Sans Mono,Bitstream Vera Sans Mono,Liberation Mono,Nimbus Mono L,Courier New,Courier,monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;background:#1d1f21;color:#c5c8c6}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b4b7b4}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b4b7b4}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#969896}.token.punctuation{color:#c5c8c6}.token.namespace{opacity:.7}.token.boolean,.token.number,.token.operator{color:#de935f}.token.property{color:#f0c674}.token.tag{color:#81a2be}.token.string{color:#8abeb7}.token.selector{color:#b294bb}.token.attr-name{color:#de935f}.language-css .token.string,.style .token.string,.token.entity,.token.url{color:#8abeb7}.token.attr-value,.token.control,.token.directive,.token.keyword,.token.unit{color:#b5bd68}.token.atrule,.token.regex,.token.statement{color:#8abeb7}.token.placeholder,.token.variable{color:#81a2be}.token.deleted{text-decoration:line-through}.token.inserted{border-bottom:1px dotted #fff;text-decoration:none}.token.italic{font-style:italic}.token.bold,.token.important{font-weight:700}.token.important{color:#c66}.token.entity{cursor:help}pre>code.highlight{outline:.4em solid #c66;outline-offset:.4em}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="-326138825"><!-- react-empty: 2 --><div data-reactid="3"><!-- react-empty: 4 --><!-- react-empty: 5 --><div class="sc-jzJRlG jvfQJd" data-reactid="6"><div class="sc-kAzzGY izfjHs" data-reactid="7"><div class="sc-bxivhb bcCrHd" data-reactid="8"><div class="sc-htpNat bsoOjX" data-reactid="9"><section data-reactid="10"><span class="nav-wrapper" data-reactid="11"><a class="nav-link" href="/" data-reactid="12"><span data-reactid="13">HOME</span></a></span><span class="nav-wrapper" data-reactid="14"><a class="nav-link" href="/docs/about/why-optic" data-reactid="15"><span data-reactid="16">DOCS</span></a></span><span class="nav-wrapper" data-reactid="17"><a class="nav-link" href="/teams" data-reactid="18"><span data-reactid="19">TEAMS</span></a></span><span class="nav-wrapper" data-reactid="20"><a class="nav-link" href="/blog" data-reactid="21"><span data-reactid="22">BLOG</span></a></span><span class="nav-wrapper" data-reactid="23"><a class="nav-link" href="/download" data-reactid="24"><span data-reactid="25">DOWNLOAD</span></a></span></section><span class="user-links" data-reactid="26"><div class="user-links sc-bdVaJa fuwqKj" data-reactid="27"><a class="sc-bwzfXH iUvEoY" href="https://github.com/opticdev" data-reactid="28"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;width:20px;height:20px;" data-reactid="29"><g data-reactid="30"><path d="m15.8 27.1q0 0.9-0.3 1.9t-1 1.7-1.6 0.7-1.6-0.7-1-1.7-0.2-1.9 0.3-1.8 0.9-1.7 1.6-0.7 1.6 0.7 1 1.7 0.3 1.8z m14.3 0q0 0.9-0.3 1.9t-1 1.7-1.6 0.7-1.6-0.7-1-1.7-0.2-1.9 0.2-1.8 1-1.7 1.6-0.7 1.6 0.7 1 1.7 0.3 1.8z m3.5 0q0-2.6-1.5-4.5t-4.2-1.9q-0.9 0-4.3 0.5-1.6 0.2-3.5 0.2t-3.5-0.2q-3.4-0.5-4.4-0.5-2.6 0-4.2 1.9t-1.5 4.5q0 2 0.7 3.5t1.8 2.3 2.7 1.3 3.2 0.7 3.3 0.1h3.7q1.9 0 3.4-0.1t3.1-0.7 2.7-1.3 1.8-2.3 0.7-3.5z m5-3.9q0 4.6-1.3 7.4-0.9 1.7-2.4 3t-3.1 1.9-3.8 1.1-3.8 0.4-3.8 0.1q-1.7 0-3.1 0t-3.3-0.3-3.4-0.7-3.1-1.1-2.7-1.8-1.9-2.6q-1.4-2.7-1.4-7.4 0-5.3 3-8.8-0.6-1.9-0.6-3.8 0-2.6 1.2-4.9 2.4 0 4.2 0.9t4.2 2.8q3.3-0.8 6.9-0.8 3.3 0 6.3 0.7 2.3-1.8 4.2-2.7t4.2-0.9q1.1 2.3 1.1 4.9 0 1.9-0.6 3.7 3 3.6 3 8.9z" data-reactid="31"></path></g></svg></a><a class="sc-bwzfXH iUvEoY" href="https://twitter.com/useoptic?lang=en" data-reactid="32"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;width:20px;height:20px;" data-reactid="33"><g data-reactid="34"><path d="m37.7 9.1q-1.5 2.2-3.7 3.7 0.1 0.3 0.1 1 0 2.9-0.9 5.8t-2.6 5.5-4.1 4.7-5.7 3.3-7.2 1.2q-6.1 0-11.1-3.3 0.8 0.1 1.7 0.1 5 0 9-3-2.4-0.1-4.2-1.5t-2.6-3.5q0.8 0.1 1.4 0.1 1 0 1.9-0.3-2.5-0.5-4.1-2.5t-1.7-4.6v0q1.5 0.8 3.3 0.9-1.5-1-2.4-2.6t-0.8-3.4q0-2 0.9-3.7 2.7 3.4 6.6 5.4t8.3 2.2q-0.2-0.9-0.2-1.7 0-3 2.1-5.1t5.1-2.1q3.2 0 5.3 2.3 2.4-0.5 4.6-1.7-0.8 2.5-3.2 3.9 2.1-0.2 4.2-1.1z" data-reactid="35"></path></g></svg></a><a class="sc-bwzfXH iUvEoY" href="mailto:aidan@useoptic.com" data-reactid="36"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;width:20px;height:20px;" data-reactid="37"><g data-reactid="38"><path d="m33.4 13.4v-3.4l-13.4 8.4-13.4-8.4v3.4l13.4 8.2z m0-6.8q1.3 0 2.3 1.1t0.9 2.3v20q0 1.3-0.9 2.3t-2.3 1.1h-26.8q-1.3 0-2.3-1.1t-0.9-2.3v-20q0-1.3 0.9-2.3t2.3-1.1h26.8z" data-reactid="39"></path></g></svg></a></div></span></div></div></div><div class="sc-cSHVUG fuWFRV" data-reactid="40"><div data-reactid="41"><h1 id="relationships"><a href="#relationships" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Relationships</h1>
<p>Most of the code in any project is related. </p>
<ul>
<li>Data models determine the structure of your queries</li>
<li>The queries you write affect the structure of your API</li>
<li>The API determines what your HTTP Requests look like</li>
<li>The API influences the forms/state management of each client
...plus many other relationships specific to the type of application you are writing. </li>
</ul>
<p>We think of these relationships as implicit dependencies, and in any reasonably medium sized codebase there are hundred of them to manage. Whenever you update code in one place and find yourself tracking down all the other code that breaks -- that's you manually managing your implicit dependencies just like people used to manually download/compile the modules they needed before there were good package managers. </p>
<p>Implicit dependencies are usually manifested in the glue-code and boilerplate. Using Optic relationships can help you write and maintain this code throughout your projects, even when the implicit dependencies cross languages (Python backend + JS frontend).</p>
<h2 id="using-relationships-in-optic"><a href="#using-relationships-in-optic" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Using Relationships in Optic</h2>
<p>There are two ways to use relationships in Optic. </p>
<ol>
<li>
<p>Generating Related Code &#x26; Move Faster - Optic can automatically generate code that interfaced with another part of your project. For instance, you can direct Optic to generate a React form on your client that sends data to one of the endpoints in your API. Since Optic knows the method, parameters, and authentication the server expects it can write the correct code for you. Direct access to these generators can sidestep the need for keeping documentation updated. </p>
</li>
<li>
<p>Keeping code in Sync - Every project evolves, and that means you need to manually update all your implicit dependencies. Optic can tell you which code will be affected by any change, and generate a pull request to make the required updates. Doing this manually isn't rocket science but it's slow, low-value work that's prone to mistakes.</p>
</li>
</ol>
<h2 id="creating-relationships"><a href="#creating-relationships" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating Relationships</h2>
<p>Relationships can be defined between any 2 generators or abstractions. For example, if you wanted to keep an API/client in sync, you would need a Relationship from <code class="language-text">optic:rest/endpoint -&gt; optic:rest/http-request</code>.</p>
<p>There can be as many relationships between the same 2 generators and abstractions as you find useful. Each one is made unique by a property called <code class="language-text">yields</code> that's similar to a name. The above Relationship between <code class="language-text">optic:rest/endpoint</code> and <code class="language-text">optic:rest/http-request</code> would yield a <code class="language-text">Route from Endpoint</code>. We could also have a set of relationships between a database model and an API Endpoint that yield a <code class="language-text">Create Endpoint</code>, <code class="language-text">Read Endpoint</code>, <code class="language-text">Update Endpoint</code>, or <code class="language-text">Delete Endpoint</code>. </p>
<p>The most important part of a Relationship is the transform function that takes input of type A and returns type B. The transform function operates on the level of the abstractions used by Optic Generators, they never deal with any raw source code. The <code class="language-text">input</code> argument contains this abstract model representing whatever is being transformed. You then map that object into one that conforms to the output abstraction and return that value. </p>
<p>The most basic Relationship we could make would look like this: </p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token function">Relationship</span><span class="token punctuation">(</span>
<span class="token string">'Foo from Bar'</span><span class="token punctuation">,</span> <span class="token comment">//yields (name)</span>
<span class="token string">'foo-from-bar'</span><span class="token punctuation">,</span> <span class="token comment">//id</span>
<span class="token string">'foo'</span><span class="token punctuation">,</span>          <span class="token comment">//input type</span>
<span class="token string">'bar'</span><span class="token punctuation">,</span>          <span class="token comment">//output type</span>
<span class="token punctuation">(</span>input<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span>
		value<span class="token punctuation">:</span> input<span class="token punctuation">.</span>foo
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> bar
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Here's a real world example that maps an API Endpoint to an HTTP Request:  </p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span>Relationship<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"optic-skills-sdk"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> requestFromRoute <span class="token operator">=</span> <span class="token function">Relationship</span><span class="token punctuation">(</span>
<span class="token string">'Request from Route'</span><span class="token punctuation">,</span> <span class="token comment">//yields (name)</span>
<span class="token string">'request-from-route'</span><span class="token punctuation">,</span> <span class="token comment">//id</span>
<span class="token string">'optic:rest/route'</span><span class="token punctuation">,</span>   <span class="token comment">//input type</span>
<span class="token string">'request'</span><span class="token punctuation">,</span>            <span class="token comment">//output type</span>
<span class="token punctuation">(</span>input<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token punctuation">{</span>
		method<span class="token punctuation">:</span> input<span class="token punctuation">.</span>method<span class="token punctuation">,</span>
		options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
			uri<span class="token punctuation">:</span> input<span class="token punctuation">.</span>url
			query<span class="token punctuation">:</span> input<span class="token punctuation">.</span>parameters<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>i<span class="token operator">=></span> i<span class="token punctuation">.</span><span class="token keyword">in</span> <span class="token operator">===</span> <span class="token string">'query'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			body<span class="token punctuation">:</span> input<span class="token punctuation">.</span>parameters<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>i<span class="token operator">=></span> i<span class="token punctuation">.</span><span class="token keyword">in</span> <span class="token operator">===</span> <span class="token string">'body'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> request
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>At the code level, this Relationship, defined once, would keep any code like this in sync: </p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token comment">//the input endpoint (from backend)</span>
app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/hello'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">'Hello '</span><span class="token operator">+</span>req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>name<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//the output request (on frontend)</span>
request<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span> uri<span class="token punctuation">:</span> <span class="token string">'/hello'</span><span class="token punctuation">,</span> qs<span class="token punctuation">:</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> name <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> response<span class="token punctuation">,</span> body<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//any handler...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<h2 id="gathering-additional-information"><a href="#gathering-additional-information" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Gathering Additional Information</h2>
<p>Some Relationships require additional information Optic can't infer from your existing code. For instance, when generating a API endpoint, you might want to offer a flag for authenticated that affects how that route is rendered.</p>
<p>The SDK supports requesting additional information from the user with a class called <code class="language-text">Ask</code>. </p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> ask <span class="token operator">=</span> <span class="token function">Ask</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
ask<span class="token punctuation">.</span><span class="token function">forPrimitive</span><span class="token punctuation">(</span><span class="token string">'test'</span><span class="token punctuation">,</span> <span class="token string">'used for testing'</span><span class="token punctuation">,</span> <span class="token string">'string'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> exampleRelationship <span class="token operator">=</span> <span class="token function">Relationship</span><span class="token punctuation">(</span><span class="token string">'transformed'</span><span class="token punctuation">,</span> <span class="token string">'example-transform'</span><span class="token punctuation">,</span> <span class="token string">'hello:abc'</span><span class="token punctuation">,</span> <span class="token string">'hello:def'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>input<span class="token punctuation">,</span> answers<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>other<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">withAsk</span><span class="token punctuation">(</span>ask<span class="token punctuation">)</span></code></pre>
      </div>
<p>The first argument to all of the ask functions is the name of the field. We suggest you make it a valid JS token, so you can reference it with dot notation in your transform function.</p>
<p>The second argument is a description. Use this field to give users the details they need to properly answer your questions and inform them of how this information will be used.</p>
<p>When calling <code class="language-text">forPrimitive</code>, the 3rd argument is required and defines the type you must answer with. Right now boolean, string, and number are allowed. These types follow the same semantics as they do in the JSON Schema Spec.</p>
<p>When calling <code class="language-text">forGenerator</code>, the 3rd argument is optional and allows you to filter the Lenses you can answer with to ones that render a certain Schema. There’s a one-to-many relationship between Schemas and Lenses, so often a Transformation will need to ask users which Lens they would like to render the result with. Naturally if you are Transforming something into a Rest Route, you only want to employ Lenses capable of doing that.</p>
<p>When calling <code class="language-text">for</code>, the 3rd argument is a function that receives input model being transformed. You can process that input and return another JSON schema. This supports asking for data based on the input model.</p>
<p>Using Answers: All answers are added to an object which is passed into the transform function as the second argument. You can access them with dot or bracket notation as you would any other property.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript">ask<span class="token punctuation">.</span><span class="token function">forPrimitive</span><span class="token punctuation">(</span><span class="token string">'ask1'</span><span class="token punctuation">,</span> <span class="token string">'Description here...'</span><span class="token punctuation">,</span> <span class="token string">'string'</span><span class="token punctuation">)</span>
ask<span class="token punctuation">.</span><span class="token function">forLens</span><span class="token punctuation">(</span><span class="token string">'ask2'</span><span class="token punctuation">,</span> <span class="token string">'Description here...'</span><span class="token punctuation">,</span> <span class="token string">'test:package/Schema'</span><span class="token punctuation">)</span>
ask<span class="token punctuation">.</span><span class="token function">forSchema</span><span class="token punctuation">(</span><span class="token string">'ask3'</span><span class="token punctuation">,</span> <span class="token string">'Description here...'</span><span class="token punctuation">)</span>
ask<span class="token punctuation">.</span><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token string">'ask4'</span><span class="token punctuation">,</span> <span class="token string">'Description here...'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>input<span class="token punctuation">)</span><span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">(</span>input<span class="token punctuation">,</span> answers<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  answers<span class="token punctuation">.</span>ask1 <span class="token comment">//a primitive of the specified type</span>
  answers<span class="token punctuation">.</span>ask2 <span class="token comment">//the ID of a compiled Lens, guaranteed to render specified Schema</span>
  answers<span class="token punctuation">.</span>ask3 <span class="token comment">//a Schema reference</span>
 <span class="token operator">...</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<h2 id="advanced-options"><a href="#advanced-options" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Advanced Options</h2>
<p>It is possible to further customize the code that gets written when a relationship is evaluated. Just call <code class="language-text">Generate</code> from your transform function. Generate takes 3 arguments: 1) the abstraction or generator id you want to generate code for 2) the JSON value for that generator and 3) the options below.  </p>
<ul>
<li>generatorId - allows you to control which generator is used to render this code. This provides degrees of freedom if you want to make the output generator conditional. </li>
<li>containers - allows you to nest generators together ie API Endpoint, with a query inside its handler. Use the container name as the key, and an array of Generate calls to populate them</li>
<li>variables - allow you to set the value of a variable. In your generator, you might have a variable for <code class="language-text">queryResult</code>, and now you want to set all instances of that variable to <code class="language-text">insertUserResult</code>. </li>
<li>tag - tags are used to uniquely identify children within the generated code. Even after manual changes are made, Optic will still know to keep these children in sync in addition to the parent. </li>
</ul>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">(</span>input<span class="token punctuation">,</span> answers<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> value <span class="token operator">=</span> <span class="token punctuation">{</span>
    key1<span class="token punctuation">:</span> input<span class="token punctuation">.</span>a
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">Generate</span><span class="token punctuation">(</span>answers<span class="token punctuation">.</span>output<span class="token punctuation">,</span> value<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    generatorId<span class="token punctuation">:</span> <span class="token string">'example:skill/generator'</span><span class="token punctuation">,</span>
    containers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'container name'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token function">Generate</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">Generate</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    variables<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token string">'variable'</span><span class="token punctuation">:</span> <span class="token string">'value'</span> 
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    tag<span class="token punctuation">:</span> <span class="token string">'example'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre>
      </div>
<p>Here's a working example of a more complex relationship that yields a GET {X} API Endpoint from a <code class="language-text">mongoose-schema</code>.</p>
<p>input:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">const</span> ToDo <span class="token operator">=</span> mongoose<span class="token punctuation">.</span><span class="token function">model</span><span class="token punctuation">(</span><span class="token string">'Todo'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">mongoose<span class="token punctuation">.</span>Schema</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  task<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
  isDone<span class="token punctuation">:</span> <span class="token string">'boolean'</span><span class="token punctuation">,</span>
  dueDate<span class="token punctuation">:</span> <span class="token string">'date'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
      </div>
<p>output:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/todo'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">'Content-Type'</span><span class="token punctuation">,</span> <span class="token string">'application/json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    ToDo<span class="token punctuation">.</span><span class="token function">findOne</span><span class="token punctuation">(</span><span class="token punctuation">{</span> _id<span class="token punctuation">:</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>todoId <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>err<span class="token punctuation">,</span> item<span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token comment">//tag: query</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>item<span class="token punctuation">)</span> <span class="token punctuation">{</span>
              res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
              res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>relationship:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">const</span> getRouteFromSchema <span class="token operator">=</span> <span class="token function">Relationship</span><span class="token punctuation">(</span>
	<span class="token string">'Get Route'</span><span class="token punctuation">,</span>
	<span class="token string">'get-route-from-schema'</span><span class="token punctuation">,</span>
	<span class="token string">'mongoose-schema'</span><span class="token punctuation">,</span>
	<span class="token string">'optic:rest/route'</span><span class="token punctuation">,</span>
	<span class="token punctuation">(</span>input<span class="token punctuation">,</span> answers<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> routeName <span class="token operator">=</span> input<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> idName <span class="token operator">=</span> routeName<span class="token operator">+</span><span class="token string">'Id'</span>
		<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token string">"/"</span> <span class="token operator">+</span> routeName<span class="token punctuation">;</span>
		<span class="token keyword">const</span> routeDescription <span class="token operator">=</span> <span class="token punctuation">{</span>
			method<span class="token punctuation">:</span> <span class="token string">"get"</span><span class="token punctuation">,</span>
			url<span class="token punctuation">:</span> route<span class="token punctuation">,</span>
			parameters<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span> <span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token string">'query'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> idName<span class="token punctuation">}</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token keyword">const</span> queryDescription <span class="token operator">=</span> <span class="token punctuation">{</span>
			query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
				<span class="token string">'_id'</span><span class="token punctuation">:</span> <span class="token function">Generate</span><span class="token punctuation">(</span><span class="token string">'optic:rest/parameter'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
					<span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token string">'query'</span><span class="token punctuation">,</span>
					name<span class="token punctuation">:</span> idName
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token function">Generate</span><span class="token punctuation">(</span>answers<span class="token punctuation">.</span>output<span class="token punctuation">,</span> routeDescription<span class="token punctuation">,</span> <span class="token punctuation">{</span>
			containers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
				<span class="token string">"handler"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token function">Generate</span><span class="token punctuation">(</span><span class="token string">'optic:mongoose@0.3.0/find-one'</span><span class="token punctuation">,</span> queryDescription<span class="token punctuation">,</span> <span class="token punctuation">{</span>
					tag<span class="token punctuation">:</span> <span class="token string">"query"</span><span class="token punctuation">,</span>
					containers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
						<span class="token string">"found"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token function">Generate</span><span class="token punctuation">(</span><span class="token string">'optic:rest/response'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>code<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>variables<span class="token punctuation">:</span> <span class="token punctuation">{</span>item<span class="token punctuation">:</span> <span class="token string">'item'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string">"notFound"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token function">Generate</span><span class="token punctuation">(</span><span class="token string">'optic:rest/response'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>code<span class="token punctuation">:</span> <span class="token number">404</span><span class="token punctuation">,</span> value<span class="token punctuation">:</span> <span class="token string">'Not Found'</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>variables<span class="token punctuation">:</span> <span class="token punctuation">{</span>item<span class="token punctuation">:</span> <span class="token string">'item'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string">"error"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token function">Generate</span><span class="token punctuation">(</span><span class="token string">'optic:rest/response'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>code<span class="token punctuation">:</span> <span class="token number">400</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>variables<span class="token punctuation">:</span> <span class="token punctuation">{</span>item<span class="token punctuation">:</span> <span class="token string">'err'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<h2 id="next-steps"><a href="#next-steps" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Next Steps</h2>
<ul>
<li>Learn about <a href="/docs/authoring/abstractions/">Abstractions</a></li>
</ul></div></div><div class="sc-chPdSV kteKgX" data-reactid="42"><div class="sc-gzVnrw efUMmA" data-reactid="43"><div class="toc-main" data-reactid="44"><ol class="sc-htoDjs kTmsXR" data-reactid="45"><li class="head sc-gZMcBi efHnSd" id="head-About Optic" data-reactid="46"><h5 class="sc-VigVT fshBww" data-reactid="47">About Optic</h5><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" class="chevron chevron-open" id="chevron-About Optic" style="vertical-align:middle;" data-reactid="48"><g data-reactid="49"><path d="m37.6 18l-16.6 16.6q-0.4 0.4-1 0.4t-1-0.4l-16.6-16.6q-0.4-0.4-0.4-1t0.4-1l3.7-3.7q0.5-0.4 1-0.4t1 0.4l11.9 11.9 11.9-11.9q0.4-0.4 1-0.4t1 0.4l3.7 3.7q0.4 0.4 0.4 1t-0.4 1z" data-reactid="50"></path></g></svg></li><li class="sc-gZMcBi efHnSd" id="list-About Optic" data-reactid="51"><ol class="sc-dnqmqq hFnaBo" data-reactid="52"><li class="sc-gqjmRU iCEMyR" data-reactid="53"><a href="/docs/about/why-optic" data-reactid="54"><h6 class="sc-iwsKbI hTJcdm" data-reactid="55">Why Optic?</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="56"><a href="/docs/about/another-code-generator" data-reactid="57"><h6 class="sc-iwsKbI hTJcdm" data-reactid="58">Another Code Generator?</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="59"><a href="/docs/about/technical-overview" data-reactid="60"><h6 class="sc-iwsKbI hTJcdm" data-reactid="61">Technical Overview</h6></a></li></ol></li><li class="sc-gZMcBi efHnSd" id="About Optic" data-reactid="62"></li></ol><ol class="sc-htoDjs kTmsXR" data-reactid="63"><li class="head sc-gZMcBi efHnSd" id="head-Teaching Optic" data-reactid="64"><h5 class="sc-VigVT fshBww" data-reactid="65">Teaching Optic</h5><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" class="chevron chevron-open" id="chevron-Teaching Optic" style="vertical-align:middle;" data-reactid="66"><g data-reactid="67"><path d="m37.6 18l-16.6 16.6q-0.4 0.4-1 0.4t-1-0.4l-16.6-16.6q-0.4-0.4-0.4-1t0.4-1l3.7-3.7q0.5-0.4 1-0.4t1 0.4l11.9 11.9 11.9-11.9q0.4-0.4 1-0.4t1 0.4l3.7 3.7q0.4 0.4 0.4 1t-0.4 1z" data-reactid="68"></path></g></svg></li><li class="sc-gZMcBi efHnSd" id="list-Teaching Optic" data-reactid="69"><ol class="sc-dnqmqq hFnaBo" data-reactid="70"><li class="sc-gqjmRU iCEMyR" data-reactid="71"><a href="/docs/authoring/what-are-optic-skills" data-reactid="72"><h6 class="sc-iwsKbI hTJcdm" data-reactid="73">What are Optic Skills?</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="74"><a href="/docs/authoring/generators" data-reactid="75"><h6 class="sc-iwsKbI hTJcdm" data-reactid="76">Generators</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="77"><a class="active-toc-link" href="/docs/authoring/relationships" data-reactid="78"><h6 class="sc-iwsKbI hTJcdm" data-reactid="79">Relationships</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="80"><a href="/docs/authoring/abstractions" data-reactid="81"><h6 class="sc-iwsKbI hTJcdm" data-reactid="82">Abstractions</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="83"><a href="/docs/authoring/publishing" data-reactid="84"><h6 class="sc-iwsKbI hTJcdm" data-reactid="85">Publishing</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="86"><a href="/docs/authoring/extending-optic" data-reactid="87"><h6 class="sc-iwsKbI hTJcdm" data-reactid="88">Extending Optic</h6></a></li></ol></li><li class="sc-gZMcBi efHnSd" id="Teaching Optic" data-reactid="89"></li></ol><ol class="sc-htoDjs kTmsXR" data-reactid="90"><li class="head sc-gZMcBi efHnSd" id="head-Using Optic" data-reactid="91"><h5 class="sc-VigVT fshBww" data-reactid="92">Using Optic</h5><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" class="chevron chevron-open" id="chevron-Using Optic" style="vertical-align:middle;" data-reactid="93"><g data-reactid="94"><path d="m37.6 18l-16.6 16.6q-0.4 0.4-1 0.4t-1-0.4l-16.6-16.6q-0.4-0.4-0.4-1t0.4-1l3.7-3.7q0.5-0.4 1-0.4t1 0.4l11.9 11.9 11.9-11.9q0.4-0.4 1-0.4t1 0.4l3.7 3.7q0.4 0.4 0.4 1t-0.4 1z" data-reactid="95"></path></g></svg></li><li class="sc-gZMcBi efHnSd" id="list-Using Optic" data-reactid="96"><ol class="sc-dnqmqq hFnaBo" data-reactid="97"><li class="sc-gqjmRU iCEMyR" data-reactid="98"><a href="/docs/using/get-started" data-reactid="99"><h6 class="sc-iwsKbI hTJcdm" data-reactid="100">Get Started</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="101"><a href="/docs/using/workflow" data-reactid="102"><h6 class="sc-iwsKbI hTJcdm" data-reactid="103">Workflow</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="104"><a href="/docs/using/properties" data-reactid="105"><h6 class="sc-iwsKbI hTJcdm" data-reactid="106">Properties</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="107"><a href="/docs/using/search" data-reactid="108"><h6 class="sc-iwsKbI hTJcdm" data-reactid="109">Search</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="110"><a href="/docs/using/transforming-code-with-relationships" data-reactid="111"><h6 class="sc-iwsKbI hTJcdm" data-reactid="112">Transforming Code with Relationships</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="113"><a href="/docs/using/sync" data-reactid="114"><h6 class="sc-iwsKbI hTJcdm" data-reactid="115">Sync</h6></a></li></ol></li><li class="sc-gZMcBi efHnSd" id="Using Optic" data-reactid="116"></li></ol></div></div><div class="sc-jTzLTM fhRzEj" data-reactid="117"><div class="toc-main" data-reactid="118"><div data-reactid="119"><h5 class="sc-fjdhpX fxiKRU" data-reactid="120"><!-- react-text: 121 -->AUTHOR<!-- /react-text --><!-- react-text: 122 -->: <!-- /react-text --><!-- react-text: 123 -->Optic Team<!-- /react-text --></h5></div></div></div></div></div></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-97da983620473125d543.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","213130420965792":"component---src-templates-post-jsx-4e11bcc95864f64ba3df.js","112254247690605":"component---src-templates-lesson-jsx-772e29a295b5ea77ee8f.js","129745722219136":"component---src-templates-category-jsx-e95a2ab43b2b926045e0.js","186063380969677":"component---src-pages-blog-jsx-bd5143cca8b26303669b.js","155467094651736":"component---src-pages-download-jsx-560c62ea25764964cb51.js","213534597649335":"component---src-pages-index-jsx-836f00e7a94730fbe399.js","41479765680957":"component---src-pages-skills-jsx-c06259d944084c6221e1.js","183896347523440":"component---src-pages-teams-jsx-9f58abc2dc28efb0560f.js","60335399758886":"path----6611940bd40871b680a6.js","210333531512890":"path---offline-plugin-app-shell-fallback-586c7e095e534a3909ec.js","33848451909249":"path---blog-next-project-328f8e07cc31f83ba457.js","219796358021837":"path---blog-starting-the-public-beta-6d019af4214f395cfa13.js","37246892356048":"path---blog-advanced-transformations-f104e4bc227a59dd19ba.js","91216308360019":"path---blog-first-release-open-source-beta-plans-38e5441a923645086094.js","220276549955866":"path---blog-opm-live-7be9d64b7562fa3afedc.js","242684328019104":"path---blog-opm-auto-updating-9b9d484c99a96296d9c8.js","64647134414675":"path---blog-optic-markdown-cli-62650187220177149edb.js","207033415653983":"path---blog-finished-sync-27ef9c790b173310689d.js","126954225891828":"path---blog-1-0-launched-400c3bb829baac5368de.js","65122750110790":"path---blog-optic-installer-1243ab4839e991c4388c.js","1943878788376":"path---blog-starting-sync-b349c850da6f096b7a12.js","87632488690416":"path---blog-better-transformations-6292d2cb6fae5d5bf46d.js","241988407559908":"path---blog-scriptable-interface-and-multi-project-sync-00c7ab5a94cdf56c4efc.js","154319913138761":"path---blog-whats-next-for-optic-51555a400016a05ee252.js","271997990498460":"path---blog-skills-sdk-084f51677af260a2c834.js","96981484116314":"path---skills-generate-express-crud-routes-from-a-mongoose-model-3ef1eec0c22f02474426.js","222199532302830":"path---skills-generate-request-js-calls-for-every-route-in-an-express-backend-950f324e41dbeaa0db61.js","13815718468976":"path---docs-authoring-adding-optic-support-for-new-id-es-ae318fdb93e57110edb0.js","116810464517113":"path---docs-authoring-extending-optic-29cdf341fabb66f639f4.js","272108909471679":"path---docs-using-properties-1dcd4013736fc351d3db.js","161127120531176":"path---docs-using-sync-75d37983aa2627142cc2.js","274126399432635":"path---docs-using-workflow-179f8a216ce87faff028.js","217177696140476":"path---docs-authoring-abstractions-2cb0a4d28b684b9cbcf5.js","230318067145846":"path---docs-authoring-publishing-8defb13e2b46e526c0eb.js","170128383802128":"path---docs-authoring-relationships-b0068624f9ed51aa34de.js","14117618859859":"path---docs-using-get-started-138396019c7f542de69d.js","168993281860204":"path---docs-using-search-306ddf48cfb12f8baca5.js","199597057477506":"path---docs-using-transforming-code-with-relationships-420d1fa2b04a99e0f1f3.js","159073322833193":"path---docs-about-technical-overview-ba8b798e09057a6cac2d.js","69622577086375":"path---docs-about-why-optic-eda6123ad7d7f52fd3c7.js","47044606424611":"path---docs-about-another-code-generator-f86422344464469c3f39.js","248238044447976":"path---docs-authoring-what-are-optic-skills-1298ccc993ddb24c9f39.js","267575277463257":"path---docs-authoring-generators-ecc25798aeb9b13a242b.js","86242794778721":"path---categories-tech-2084ff376d0f7aff5756.js","49683490770531":"path---blog-60384e559e9a4d3eba17.js","194151663809297":"path---download-586c7e095e534a3909ec.js","142629428675168":"path---index-5102db1de6dec4cf2dc0.js","152103125342432":"path---skills-586c7e095e534a3909ec.js","64831998229159":"path---teams-586c7e095e534a3909ec.js","79611799117203":"component---src-layouts-index-jsx-7a4017099845f4526de5.js"}/*]]>*/</script><script>
            
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-112777347-1', 'auto');
      }
      </script><script>
          window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
      </script><script>/*<![CDATA[*/["/commons-a2102892feac76f8cd93.js","/app-97da983620473125d543.js","/path---docs-authoring-relationships-b0068624f9ed51aa34de.js","/component---src-templates-lesson-jsx-772e29a295b5ea77ee8f.js","/component---src-layouts-index-jsx-7a4017099845f4526de5.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script><script>
              window.intercomSettings = {
               app_id: "xx7buah0"
              };
        </script><script>
            (function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/xx7buah0';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()
        </script></body></html>
<!DOCTYPE html><html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-layouts-index-jsx-7a4017099845f4526de5.js" as="script"/><link rel="preload" href="/component---src-templates-lesson-jsx-772e29a295b5ea77ee8f.js" as="script"/><link rel="preload" href="/path---docs-authoring-generators-5d1d1087817442fbee64.js" as="script"/><link rel="preload" href="/app-5a36b2b332795f507fb0.js" as="script"/><link rel="preload" href="/commons-a2102892feac76f8cd93.js" as="script"/><style type="text/css" data-styled-components="jvfQJd izfjHs bcCrHd bsoOjX fuwqKj iUvEoY fuWFRV kteKgX efUMmA kTmsXR efHnSd fshBww hFnaBo iCEMyR hTJcdm fhRzEj fxiKRU" data-styled-components-is-local="true">/* sc-component-id: sc-bdVaJa */

.fuwqKj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;max-width:100%;margin-top:10px;}
/* sc-component-id: sc-bwzfXH */

.iUvEoY{margin-left:25px;color:white;}.iUvEoY:hover{color:rgba(0,0,0,0.2);border-bottom:none;}
/* sc-component-id: sc-htpNat */

.bsoOjX{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;width:calc(100% - 50px);background:#399cd3;position:fixed;}.bsoOjX .nav-wrapper{padding-left:4px;padding-right:4px;}.bsoOjX .nav-wrapper:last-child .nav-link{margin-right:0;}.bsoOjX a.nav-link:hover span{border-bottom:1px solid white !important;}.bsoOjX .nav-link{font-size:1.6rem;margin-right:10px;line-height:50px;font-weight:200;color:white;display:inline-block;}.bsoOjX .nav-link.active-nav-link span{border-bottom:1px solid white;}@media screen and (max-width:600px){.bsoOjX .nav-link{font-size:1.4rem;margin-right:7px;}}@media screen and (max-width:600px){.bsoOjX{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;left:0;width:100%;padding:0 10px;z-index:2;}.bsoOjX .user-links{display:none;}}
/* sc-component-id: sc-bxivhb */

.bcCrHd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;background:#399cd3;padding:25px;}
/* sc-component-id: sc-gzVnrw */

.efUMmA{padding:25px;margin:0;}
/* sc-component-id: sc-htoDjs */

.kTmsXR{list-style:none;margin:0;}.kTmsXR .head{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;cursor:pointer;}
/* sc-component-id: sc-dnqmqq */

.hFnaBo{list-style:none;}
/* sc-component-id: sc-iwsKbI */

.hTJcdm{display:inline-block;font-weight:200;color:#35495E;margin:0;line-height:1.5;border-bottom:1px solid transparent;-webkit-text-decoration:none;text-decoration:none;}
/* sc-component-id: sc-gZMcBi */

.efHnSd{margin:0;}.efHnSd .chevron{height:15px;width:15px;color:#35495E;-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);-webkit-transition:all 300ms ease-in-out;transition:all 300ms ease-in-out;}.efHnSd .chevron-open{-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg);}
/* sc-component-id: sc-gqjmRU */

.iCEMyR{margin:0;}.iCEMyR a:hover,.iCEMyR .active-toc-link{border-bottom:1px solid #35495E;}
/* sc-component-id: sc-VigVT */

.fshBww{font-weight:200;font-size:2.1rem;color:#399cd3;border-left:3px solid #bce0f5;padding-left:1em;}
/* sc-component-id: sc-jTzLTM */

.fhRzEj{padding:25px;margin:0;}
/* sc-component-id: sc-fjdhpX */

.fxiKRU{font-weight:200;color:#399cd3;border-left:3px solid #bce0f5;padding-left:1em;}
/* sc-component-id: sc-jzJRlG */

.jvfQJd{height:100vh;display:grid;grid-template-rows:50px 1fr;grid-template-columns:1fr 320px;}@media screen and (max-width:768px){.jvfQJd{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:inherit;}}
/* sc-component-id: sc-cSHVUG */

.fuWFRV{grid-column:1 / 2;grid-row:2 / 3;justify-self:center;max-width:700px;padding:25px;}.fuWFRV.hidden-toc{grid-column:1 / 3;}@media screen and (max-width:768px){.fuWFRV{-webkit-order:3;-ms-flex-order:3;order:3;}.fuWFRV.hidden-toc{margin-top:50px;}}.fuWFRV > div{max-width:1440px;margin:auto;}.fuWFRV > div > h1{color:#35495E;}@media screen and (max-width:768px){.fuWFRV > div > h1{margin-top:0;}}@media screen and (max-width:600px){.fuWFRV{max-width:100%;}}
/* sc-component-id: sc-kAzzGY */

.izfjHs{grid-column:1 / 3;grid-row:1 / 2;z-index:2;position:fixed;width:100%;}@media screen and (max-width:768px){.izfjHs{-webkit-order:1;-ms-flex-order:1;order:1;}}
/* sc-component-id: sc-chPdSV */

.kteKgX{grid-column:2 / 3;grid-row:2 / 3;background:none;overflow-y:auto;position:fixed;right:0;width:320px;height:calc(100vh - 50px);top:50px;}.kteKgX.hidden-toc > div:first-child{display:none;}@media screen and (max-width:768px){.kteKgX{-webkit-order:2;-ms-flex-order:2;order:2;top:0;margin-top:50px;position:relative;height:auto;width:100%;overflow:inherit;}}
</style><title data-react-helmet="true">Generators | Automate Routine Programming</title><meta data-react-helmet="true" name="description" content="Creating Generators Optic Generators provide a programmatic interface for working with different kinds of code. When you create a generator…"/><meta data-react-helmet="true" name="image" content="https://useoptic.comnull"/><meta data-react-helmet="true" property="og:url" content="https://useoptic.com//docs/authoring/generators"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="Generators"/><meta data-react-helmet="true" property="og:description" content="Creating Generators Optic Generators provide a programmatic interface for working with different kinds of code. When you create a generator…"/><meta data-react-helmet="true" property="og:image" content="https://useoptic.comnull"/><meta data-react-helmet="true" property="fb:app_id" content="1825356251115265"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="useoptic"/><meta data-react-helmet="true" name="twitter:title" content="Generators"/><meta data-react-helmet="true" name="twitter:description" content="Creating Generators Optic Generators provide a programmatic interface for working with different kinds of code. When you create a generator…"/><meta data-react-helmet="true" name="twitter:image" content="https://useoptic.comnull"/><script data-react-helmet="true" type="application/ld+json">[{"@context":"http://schema.org","@type":"WebSite","url":"https://useoptic.com/","name":"Generators","alternateName":"Optic Automate Programming"},[{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"https://useoptic.com//docs/authoring/generators","name":"Generators","image":"https://useoptic.comnull"}}]},{"@context":"http://schema.org","@type":"BlogPosting","url":"https://useoptic.com/","name":"Generators","alternateName":"Optic Automate Programming","headline":"Generators","image":{"@type":"ImageObject","url":"https://useoptic.comnull"},"description":"Creating Generators Optic Generators provide a programmatic interface for working with different kinds of code. When you create a generator…"}]]</script><link href="https://fonts.googleapis.com/css?family=Crimson+Text:400,+400i,+700,+700i|Space+Mono:400,700" rel="stylesheet"/><style type="text/css">
    .anchor {
      float: left;
      padding-right: 4px;
      margin-left: -20px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var offset = element.offsetTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#c62828"/><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><style id="gatsby-inlined-css">*{box-sizing:border-box;margin:0;padding:0}table{border-collapse:collapse}table,td,th{border:1px solid #000;padding:5px}html{font-size:10px}a,body,h1,h2,h3,h4,h5,h6,li,p,ul{font-family:Roboto,Helvetica Neue,sans-serif}dl,h1,h2,h3,h4,h5,h6,ol,p,ul{margin:30px 0;font-weight:300}dd,dt,li,li>*{margin:10px 0}code,pre{font-family:Space Mono,monospace}h1{font-size:4rem}h2{font-size:3.5rem}h3{font-size:3rem}h4{font-size:2.4rem}h5{font-size:2rem}h6{font-size:1.6rem}a,dd,dt,li,p,th,tr{font-size:1.8rem;line-height:1.4em}a{color:#2973b7;text-decoration:none}a:hover{cursor:pointer}ol,ul{margin-left:20px}iframe,img{max-width:100%}.gatsby-highlight code[class*=language-],.gatsby-highlight pre[class*=language-]{box-shadow:none}.home-page-img{height:70px}.home-page-gif,.home-page-img{width:100%;background-size:contain;background-repeat:no-repeat;background-position:50%;margin-top:20px;margin-bottom:30px}.home-page-gif{height:300px}.ide-image{padding-left:20px}.language-text{border-radius:0!important;box-shadow:none}.ace_content{padding:5px}.gatsby-highlight{padding-bottom:30px}.language-text{color:#000!important}code[class*=language-],pre[class*=language-]{color:#000;background:none;font-family:Space Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.9;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:0}:not(pre)>code[class*=language-],pre[class*=language-]{background:#ebedef}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#b5bec3}.token.punctuation{color:#f8f8f2}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#efc090}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#dc78dc}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.function{color:#bed6ff}.token.keyword{color:#00d0d0}.token.important,.token.regex{color:#ccdf32}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.social-links{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-ms-flex-line-pack:center;align-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:15px 0}.social-links>div{margin:5px 15px}.share-count{text-align:center}code[class*=language-],pre[class*=language-]{font-family:Consolas,Menlo,Monaco,Andale Mono WT,Andale Mono,Lucida Console,Lucida Sans Typewriter,DejaVu Sans Mono,Bitstream Vera Sans Mono,Liberation Mono,Nimbus Mono L,Courier New,Courier,monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none;background:#1d1f21;color:#c5c8c6}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b4b7b4}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b4b7b4}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#969896}.token.punctuation{color:#c5c8c6}.token.namespace{opacity:.7}.token.boolean,.token.number,.token.operator{color:#de935f}.token.property{color:#f0c674}.token.tag{color:#81a2be}.token.string{color:#8abeb7}.token.selector{color:#b294bb}.token.attr-name{color:#de935f}.language-css .token.string,.style .token.string,.token.entity,.token.url{color:#8abeb7}.token.attr-value,.token.control,.token.directive,.token.keyword,.token.unit{color:#b5bd68}.token.atrule,.token.regex,.token.statement{color:#8abeb7}.token.placeholder,.token.variable{color:#81a2be}.token.deleted{text-decoration:line-through}.token.inserted{border-bottom:1px dotted #fff;text-decoration:none}.token.italic{font-style:italic}.token.bold,.token.important{font-weight:700}.token.important{color:#c66}.token.entity{cursor:help}pre>code.highlight{outline:.4em solid #c66;outline-offset:.4em}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="1632525947"><!-- react-empty: 2 --><div data-reactid="3"><!-- react-empty: 4 --><!-- react-empty: 5 --><div class="sc-jzJRlG jvfQJd" data-reactid="6"><div class="sc-kAzzGY izfjHs" data-reactid="7"><div class="sc-bxivhb bcCrHd" data-reactid="8"><div class="sc-htpNat bsoOjX" data-reactid="9"><section data-reactid="10"><span class="nav-wrapper" data-reactid="11"><a class="nav-link" href="/" data-reactid="12"><span data-reactid="13">HOME</span></a></span><span class="nav-wrapper" data-reactid="14"><a class="nav-link" href="/docs/about/why-optic" data-reactid="15"><span data-reactid="16">DOCS</span></a></span><span class="nav-wrapper" data-reactid="17"><a class="nav-link" href="/teams" data-reactid="18"><span data-reactid="19">TEAMS</span></a></span><span class="nav-wrapper" data-reactid="20"><a class="nav-link" href="/blog" data-reactid="21"><span data-reactid="22">BLOG</span></a></span><span class="nav-wrapper" data-reactid="23"><a class="nav-link" href="/download" data-reactid="24"><span data-reactid="25">DOWNLOAD</span></a></span></section><span class="user-links" data-reactid="26"><div class="user-links sc-bdVaJa fuwqKj" data-reactid="27"><a class="sc-bwzfXH iUvEoY" href="https://github.com/opticdev" data-reactid="28"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;width:20px;height:20px;" data-reactid="29"><g data-reactid="30"><path d="m15.8 27.1q0 0.9-0.3 1.9t-1 1.7-1.6 0.7-1.6-0.7-1-1.7-0.2-1.9 0.3-1.8 0.9-1.7 1.6-0.7 1.6 0.7 1 1.7 0.3 1.8z m14.3 0q0 0.9-0.3 1.9t-1 1.7-1.6 0.7-1.6-0.7-1-1.7-0.2-1.9 0.2-1.8 1-1.7 1.6-0.7 1.6 0.7 1 1.7 0.3 1.8z m3.5 0q0-2.6-1.5-4.5t-4.2-1.9q-0.9 0-4.3 0.5-1.6 0.2-3.5 0.2t-3.5-0.2q-3.4-0.5-4.4-0.5-2.6 0-4.2 1.9t-1.5 4.5q0 2 0.7 3.5t1.8 2.3 2.7 1.3 3.2 0.7 3.3 0.1h3.7q1.9 0 3.4-0.1t3.1-0.7 2.7-1.3 1.8-2.3 0.7-3.5z m5-3.9q0 4.6-1.3 7.4-0.9 1.7-2.4 3t-3.1 1.9-3.8 1.1-3.8 0.4-3.8 0.1q-1.7 0-3.1 0t-3.3-0.3-3.4-0.7-3.1-1.1-2.7-1.8-1.9-2.6q-1.4-2.7-1.4-7.4 0-5.3 3-8.8-0.6-1.9-0.6-3.8 0-2.6 1.2-4.9 2.4 0 4.2 0.9t4.2 2.8q3.3-0.8 6.9-0.8 3.3 0 6.3 0.7 2.3-1.8 4.2-2.7t4.2-0.9q1.1 2.3 1.1 4.9 0 1.9-0.6 3.7 3 3.6 3 8.9z" data-reactid="31"></path></g></svg></a><a class="sc-bwzfXH iUvEoY" href="https://twitter.com/useoptic?lang=en" data-reactid="32"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;width:20px;height:20px;" data-reactid="33"><g data-reactid="34"><path d="m37.7 9.1q-1.5 2.2-3.7 3.7 0.1 0.3 0.1 1 0 2.9-0.9 5.8t-2.6 5.5-4.1 4.7-5.7 3.3-7.2 1.2q-6.1 0-11.1-3.3 0.8 0.1 1.7 0.1 5 0 9-3-2.4-0.1-4.2-1.5t-2.6-3.5q0.8 0.1 1.4 0.1 1 0 1.9-0.3-2.5-0.5-4.1-2.5t-1.7-4.6v0q1.5 0.8 3.3 0.9-1.5-1-2.4-2.6t-0.8-3.4q0-2 0.9-3.7 2.7 3.4 6.6 5.4t8.3 2.2q-0.2-0.9-0.2-1.7 0-3 2.1-5.1t5.1-2.1q3.2 0 5.3 2.3 2.4-0.5 4.6-1.7-0.8 2.5-3.2 3.9 2.1-0.2 4.2-1.1z" data-reactid="35"></path></g></svg></a><a class="sc-bwzfXH iUvEoY" href="mailto:aidan@useoptic.com" data-reactid="36"><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" style="vertical-align:middle;width:20px;height:20px;" data-reactid="37"><g data-reactid="38"><path d="m33.4 13.4v-3.4l-13.4 8.4-13.4-8.4v3.4l13.4 8.2z m0-6.8q1.3 0 2.3 1.1t0.9 2.3v20q0 1.3-0.9 2.3t-2.3 1.1h-26.8q-1.3 0-2.3-1.1t-0.9-2.3v-20q0-1.3 0.9-2.3t2.3-1.1h26.8z" data-reactid="39"></path></g></svg></a></div></span></div></div></div><div class="sc-cSHVUG fuWFRV" data-reactid="40"><div data-reactid="41"><h1 id="creating-generators"><a href="#creating-generators" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating Generators</h1>
<p>Optic Generators provide a programmatic interface for working with different kinds of code. When you create a generator with the SDK, you provide Optic with enough information to learn how to parse, mutate and generate a certain kind of code. </p>
<p>An Optic generator for import statements might handle code of this form:
<code class="language-text">const name = require(&#39;path/to/value&#39;)</code>. </p>
<ol>
<li>When parsing, Optic returns a model like this <code class="language-text">{definedAs: &#39;name&#39;, path: &#39;path/to/value&#39;}</code></li>
<li>When mutating, Optic patches existing code to match an updated model provided by the user. <code class="language-text">{definedAs: &#39;newName&#39;, path: &#39;path/to/new&#39;}</code> -> <code class="language-text">const newName = require(&#39;path/to/new&#39;)</code> </li>
<li>When generating, Optic takes a new model and writes code <code class="language-text">{definedAs: &#39;namevalue&#39;, path: &#39;optic&#39;}</code> -> <code class="language-text">const namevalue = require(&#39;optic&#39;)</code> </li>
</ol>
<p>We like to think of each Optic generator as an API for a certain kind of code. You can Get (parse), Post (generate), and Put (mutate) any code in your repo that has a corresponding Optic generator. </p>
<p>To get started, you just need to decide what kind of code you want to a generator for and decide on an appropriate abstraction. For instance, if I wanted to create an Optic generator for my Express JS endpoints, it would make sense to use a data model like <code class="language-text">{url: String, method: Enum, parameters: [Parameter], responses: [Response]}</code> because when developers talk about an API, it's usually at that level of abstraction. </p>
<h2 id="example-snippet"><a href="#example-snippet" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example Snippet</h2>
<p>Every Optic generator begins with an example code snippet that Optic can use as a template. So in the above example, teaching Optic to work with API endpoints, we would start off by 1) importing the <code class="language-text">js</code> parser and then 2) providing a basic example:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span>js<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'optic-skills-sdk'</span>

js<span class="token template-string"><span class="token string">`
app.get('url', (req, res) => {

})`</span></span>
<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">'Express Endpoint'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token string">'express-endpoint'</span><span class="token punctuation">)</span> </code></pre>
      </div>
<h2 id="the-abstraction"><a href="#the-abstraction" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Abstraction</h2>
<p>We now need an abstract model that describes the example snippet. Since we're building a generator for an API endpoint we know we'll need a <code class="language-text">method</code> and a <code class="language-text">url</code> field so we'll start with those. </p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span>js<span class="token punctuation">,</span> literalWithValue<span class="token punctuation">,</span> tokenWithValue<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'optic-skills-sdk'</span>

js<span class="token template-string"><span class="token string">`
app.get('url', (req, res) => {

})`</span></span>
<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">'Express Endpoint'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token string">'express-endpoint'</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	method<span class="token punctuation">:</span> <span class="token function">tokenWithValue</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	url<span class="token punctuation">:</span> <span class="token function">literalWithValue</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Setting up an abstraction for a generator is done by constructing an object with a certain shape. You'll see that each field is assigned a value using the finder methods from by the SDK. A finder will look for a certain value in the example snippet, and learn to associate the AST node it's found in with that field.</p>
<p><img src="../../../../new-docs/images/generator-value-relationship.png" alt="example relationship"></p>
<p>These are the basic finders availible in the SDK: </p>
<table>
<thead>
<tr>
<th>Basic Finders</th>
<th>usage</th>
<th>returns</th>
</tr>
</thead>
<tbody>
<tr>
<td>tokenWithValue('string', {options})</td>
<td>finds the token with value 'string'</td>
<td>string</td>
</tr>
<tr>
<td>literalWithValue(bool</td>
<td>string</td>
<td>number, {options})</td>
</tr>
<tr>
<td>arrayWithValue([], ...{options})</td>
<td>finds the array literal with value</td>
<td>[
any
]</td>
</tr>
<tr>
<td>objectWithValue({}, ...{options})</td>
<td>finds an object literal with value</td>
<td>{any}</td>
</tr>
</tbody>
</table>
<blockquote>
<p>options: 1) occurrence: Number - when multiple finder matches are found, occurrence lets you choose the one you want in the order they appear in the example snippet. </p>
</blockquote>
<p>So now when we give Optic the following examples, it knows how to parse them:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>  <span class="token comment">//interpreted as {"method": "get", "url": "url"}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span>

app<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">'/my/url'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>  <span class="token comment">//interpreted as {"method": "put", "url": "my/url"}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>We can make this work for <code class="language-text">parameters</code> and <code class="language-text">responses</code> by stacking Optic generators on top of one another. This is done using more advanced finders. </p>
<table>
<thead>
<tr>
<th>Advanced Finders</th>
<th>usage</th>
<th>returns</th>
</tr>
</thead>
<tbody>
<tr>
<td>collect(abstractionOrGenerator)</td>
<td>finds all instances (a, a, b, c) of abstraction / generator and adds them to an array</td>
<td>[
abstraction
]</td>
</tr>
<tr>
<td>collectUnique(abstractionOrGenerator)</td>
<td>finds all unique (a, b, c) instances of abstraction / generator and adds them to an array</td>
<td>[
abstraction
]</td>
</tr>
<tr>
<td>mapToObject(abstractionOrGenerator, keyField)</td>
<td>finds all instances of abstraction / generator and add them to an object using takes field 'keyField' as the key</td>
<td>{key: abstraction, ...}</td>
</tr>
</tbody>
</table>
<p>Once we add the fields for <code class="language-text">parameters</code> and <code class="language-text">responses</code>, Optic will be able to understand a more complex example.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	method<span class="token punctuation">:</span> <span class="token function">tokenWithValue</span><span class="token punctuation">(</span><span class="token string">'get'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	url<span class="token punctuation">:</span> <span class="token function">literalWithValue</span><span class="token punctuation">(</span><span class="token string">'url'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	parameters<span class="token punctuation">:</span> <span class="token function">collectUnique</span><span class="token punctuation">(</span>parametersGenerator<span class="token punctuation">)</span><span class="token punctuation">,</span>
	responses<span class="token punctuation">:</span> <span class="token function">collectUnique</span><span class="token punctuation">(</span><span class="token string">'optic:rest/response'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">'/hello-world'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>  
	<span class="token keyword">const</span> firstName <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>firstName
	<span class="token keyword">const</span> lastName <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>lastName
	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>`Hello $<span class="token punctuation">{</span>firstName<span class="token punctuation">}</span> $<span class="token punctuation">{</span>lastName<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">/* Parsed by Optic as 
{
	"method": "get",
	"url": "hello-world",
	"parameters": [
		{"in": "query", "name": "firstName"},
		{"in": "query", "name": "lastName"},
	],
	"responses": [
		{"code": 200, "type": "string"}
	]
}
*/</span></code></pre>
      </div>
<p>You can check out a complete <a href="https://github.com/opticdev/skills-sdk-examples/blob/master/express/src/endpoint.js">implimentation of this generator</a> and <a href="https://github.com/opticdev/skills-sdk-examples/blob/master/express/src/express.test.js">its spec</a>.</p>
<h2 id="other-options"><a href="#other-options" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other Options</h2>
<h3 id="variables"><a href="#variables" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Variables</h3>
<p>When you define a variable for your generator, it tells Optic that a token can have any value, as long as it is consistent throughout this section of code.</p>
<p>For instance without a variable defined, all 3 instances of "result" must equal "result" for Optic to match this section of code.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript">function test(result) {
	message.post(result)
	system.process(result)
}</code></pre>
      </div>
<p>If you define a variable for "result" the following code will also be matched,</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript">function test(otherToken) {
	message.post(otherToken)
	system.process(otherToken)
}</code></pre>
      </div>
<p>But this code would not be matched</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript">function test(otherToken) {
	message.post(otherToken)
	system.process(result)
}</code></pre>
      </div>
<p>There are two types of variables. Those defined in <code class="language-text">self</code> and those in <code class="language-text">scope</code>.</p>
<ul>
<li><strong>self</strong> - enforces consistency of tokens in this node and its children</li>
<li><strong>scope</strong> - If the node's parent also defines a variable with the same name then the value of this variable must match the one in its parent. If it's parent does not define a variable with the same name it behaves the same as <code class="language-text">self</code>.</li>
</ul>
<p>You can set variables like this: </p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">.</span><span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	variable1<span class="token punctuation">:</span> <span class="token string">'self'</span><span class="token punctuation">,</span>
	variable2<span class="token punctuation">:</span> <span class="token string">'scope'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<h3 id="containers"><a href="#containers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Containers</h3>
<p>Containers can be used to label blocks of code and set rules about what kind of code can go inside of them. A container is defined in the example snippet by adding an inline comment with the following format <code class="language-text">//:{container name}</code>. </p>
<p>For each container in your snippet a rule for how to handle its children can be defined:</p>
<table>
<thead>
<tr>
<th>name</th>
<th>matches when</th>
</tr>
</thead>
<tbody>
<tr>
<td>any</td>
<td>always</td>
</tr>
<tr>
<td>same-plus</td>
<td>children from example snippet are present, in the order they appear in the example, plus any other children.  
<br>
 example snippet = 
[
A, B, C
]
 
<br>
 
[
B, C
]
 false 
<br>
 
[
A, D, B, C
]
 true 
<br>
 
[
A, B, C
]
 true 
<br>
 
[
A, B, C, D
]
 true</td>
</tr>
<tr>
<td>same-plus-any-order</td>
<td>children from the example snippet are present, in any order, plus any other children 
<br>
 example snippet = 
[
A, B, C
]
 
<br>
 
[
C, B, D, E, A
]
 true 
<br>
 
[
A, B, C
]
 true 
<br>
 
[
C, B, D, E
]
 false</td>
</tr>
<tr>
<td>same-any-order</td>
<td>all children from the example snippet are present, in any order,
<br>
 example snippet = 
[
A, B, C
]
 
<br>
 
[
B, C, A
]
 true 
<br>
 
[
C, A, B
]
 true 
<br>
 
[
C
]
 false 
<br>
 
[
C, B, A, D
]
 false</td>
</tr>
<tr>
<td>exact</td>
<td>children match those in the example snippet</td>
</tr>
</tbody>
</table>
<p>Here's how you configure containers with the SDK:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript">js<span class="token template-string"><span class="token string">`
sendMessage('message', (response) => {
	//:response handler
}, (error) => {
	//:error handler
	throw new ResponseError(error)
})`</span></span>

<span class="token punctuation">.</span><span class="token function">containers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token string">'response handler'</span><span class="token punctuation">:</span> <span class="token string">'any'</span>
	<span class="token string">'error handler'</span><span class="token punctuation">:</span> <span class="token string">'same-plus'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Once the containers were configured, this example would still be recodnized as valid:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	<span class="token function">alert</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	<span class="token function">retry</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// retry 3 times then throw</span>
		<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ResponseError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>and this one would not: </p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">'message'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	<span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<h3 id="customizing-abstraction"><a href="#customizing-abstraction" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Customizing Abstraction</h3>
<p>By default, Optic determines a basic abstraction schema for your generator based on the fields and finders you use when configuring the generator. However, sometimes you might want to a) customize that schema or b) have this generator implement a shared abstraction. </p>
<p>To customize the abstraction of your generator, just call <code class="language-text">.abstraction</code> and pass a valid draft-4 JSON Schema. Here's an example schema that would require <code class="language-text">in</code> to be one of the following values <code class="language-text">query, body, params, header</code>. </p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">.</span><span class="token function">abstraction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span>
	<span class="token string">"required"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"in"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	<span class="token string">"properties"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
		<span class="token string">"in"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
			<span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
			<span class="token string">"enum"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"query"</span><span class="token punctuation">,</span> <span class="token string">"body"</span><span class="token punctuation">,</span> <span class="token string">"params"</span><span class="token punctuation">,</span> <span class="token string">"header"</span><span class="token punctuation">]</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
			<span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"string"</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>If you want this generator to implement another abstraction just pass in the identifier. If the schema is coming from another package you need to add it to the dependencies section of your skill's declaration</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">.</span><span class="token function">abstraction</span><span class="token punctuation">(</span><span class="token string">'optic:rest/parameter'</span><span class="token punctuation">)</span>

<span class="token comment">//skill declaration </span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">Skill</span><span class="token punctuation">(</span><span class="token string">'optic'</span><span class="token punctuation">,</span> <span class="token string">'testing'</span><span class="token punctuation">,</span> <span class="token string">'0.4.0'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	dependencies<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		<span class="token string">'optic:rest'</span><span class="token punctuation">:</span> <span class="token string">'0.4.0'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<h2 id="testing"><a href="#testing" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testing</h2>
<p>The Skills SDK makes it easy to write simple unit tests for your generators. To test a generator, first make sure it's registered withing the skill: </p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">Skill</span><span class="token punctuation">(</span><span class="token string">'optic'</span><span class="token punctuation">,</span> <span class="token string">'testing'</span><span class="token punctuation">,</span> <span class="token string">'0.4.0'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	generators<span class="token punctuation">:</span> <span class="token punctuation">[</span>parameterGenerator<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Then get the test kit for the skill and the generator you want to test: </p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> skillTestKit <span class="token operator">=</span> <span class="token function">SkillTestKit</span><span class="token punctuation">(</span>exampleSkill<span class="token punctuation">)</span>
<span class="token keyword">const</span> parameterTestKit <span class="token operator">=</span> skillTestKit<span class="token punctuation">.</span><span class="token function">testGenerator</span><span class="token punctuation">(</span><span class="token string">'express-parameter'</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>You can test the functionality of the generator by calling: <code class="language-text">generate({input})</code>, <code class="language-text">mutate(&#39;rawcode&#39;, {newInput})</code>, and <code class="language-text">parse(&#39;rawcode&#39;)</code></p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'parameter generator'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> skillTestKit <span class="token operator">=</span> <span class="token function">SkillTestKit</span><span class="token punctuation">(</span>exampleSkill<span class="token punctuation">)</span>
		<span class="token keyword">const</span> parametersTestKit <span class="token operator">=</span> expressSkillTestKit<span class="token punctuation">.</span><span class="token function">testGenerator</span><span class="token punctuation">(</span><span class="token string">'express-parameter'</span><span class="token punctuation">)</span>
		
		<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'can generate parameters'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> result <span class="token operator">=</span> parametersTestKit<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token string">'query'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'testName'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token function">assert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>success<span class="token punctuation">)</span>
			<span class="token function">assert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">'req.query.testName'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>

		<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'can parse parameters'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> result <span class="token operator">=</span> parametersTestKit<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'req.body.param'</span><span class="token punctuation">)</span>
			<span class="token function">assert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>success<span class="token punctuation">)</span>
			<span class="token function">assert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token keyword">in</span> <span class="token operator">===</span> <span class="token string">'body'</span><span class="token punctuation">)</span>
			<span class="token function">assert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">'param'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>

		<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'will not parse parameters with invalid "in" values'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> result <span class="token operator">=</span> parametersTestKit<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">'req.whazzzzup.param'</span><span class="token punctuation">)</span>
			<span class="token function">assert</span><span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span>success<span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>

		<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'can mutate parameters'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
			<span class="token keyword">const</span> result <span class="token operator">=</span> parametersTestKit<span class="token punctuation">.</span><span class="token function">mutate</span><span class="token punctuation">(</span><span class="token string">'req.body.param'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token string">'query'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token function">assert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">'req.query.param'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>
      </div>
<p>Assuming your skill project was setup using <code class="language-text">opticsdk init</code>, you can run <code class="language-text">npm run test</code> to evaluate all the test suites in your project. </p>
<h2 id="next-steps"><a href="#next-steps" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Next Steps</h2>
<ul>
<li>Learn about <a href="/docs/authoring/relationships/">Relationships</a></li>
<li>Check out example <a href="https://github.com/opticdev/skills-sdk-examples/">Generators on GitHub</a></li>
</ul></div></div><div class="sc-chPdSV kteKgX" data-reactid="42"><div class="sc-gzVnrw efUMmA" data-reactid="43"><div class="toc-main" data-reactid="44"><ol class="sc-htoDjs kTmsXR" data-reactid="45"><li class="head sc-gZMcBi efHnSd" id="head-About Optic" data-reactid="46"><h5 class="sc-VigVT fshBww" data-reactid="47">About Optic</h5><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" class="chevron chevron-open" id="chevron-About Optic" style="vertical-align:middle;" data-reactid="48"><g data-reactid="49"><path d="m37.6 18l-16.6 16.6q-0.4 0.4-1 0.4t-1-0.4l-16.6-16.6q-0.4-0.4-0.4-1t0.4-1l3.7-3.7q0.5-0.4 1-0.4t1 0.4l11.9 11.9 11.9-11.9q0.4-0.4 1-0.4t1 0.4l3.7 3.7q0.4 0.4 0.4 1t-0.4 1z" data-reactid="50"></path></g></svg></li><li class="sc-gZMcBi efHnSd" id="list-About Optic" data-reactid="51"><ol class="sc-dnqmqq hFnaBo" data-reactid="52"><li class="sc-gqjmRU iCEMyR" data-reactid="53"><a href="/docs/about/why-optic" data-reactid="54"><h6 class="sc-iwsKbI hTJcdm" data-reactid="55">Why Optic?</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="56"><a href="/docs/about/another-code-generator" data-reactid="57"><h6 class="sc-iwsKbI hTJcdm" data-reactid="58">Another Code Generator?</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="59"><a href="/docs/about/technical-overview" data-reactid="60"><h6 class="sc-iwsKbI hTJcdm" data-reactid="61">Technical Overview</h6></a></li></ol></li><li class="sc-gZMcBi efHnSd" id="About Optic" data-reactid="62"></li></ol><ol class="sc-htoDjs kTmsXR" data-reactid="63"><li class="head sc-gZMcBi efHnSd" id="head-Teaching Optic" data-reactid="64"><h5 class="sc-VigVT fshBww" data-reactid="65">Teaching Optic</h5><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" class="chevron chevron-open" id="chevron-Teaching Optic" style="vertical-align:middle;" data-reactid="66"><g data-reactid="67"><path d="m37.6 18l-16.6 16.6q-0.4 0.4-1 0.4t-1-0.4l-16.6-16.6q-0.4-0.4-0.4-1t0.4-1l3.7-3.7q0.5-0.4 1-0.4t1 0.4l11.9 11.9 11.9-11.9q0.4-0.4 1-0.4t1 0.4l3.7 3.7q0.4 0.4 0.4 1t-0.4 1z" data-reactid="68"></path></g></svg></li><li class="sc-gZMcBi efHnSd" id="list-Teaching Optic" data-reactid="69"><ol class="sc-dnqmqq hFnaBo" data-reactid="70"><li class="sc-gqjmRU iCEMyR" data-reactid="71"><a href="/docs/authoring/what-are-optic-skills" data-reactid="72"><h6 class="sc-iwsKbI hTJcdm" data-reactid="73">What are Optic Skills?</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="74"><a class="active-toc-link" href="/docs/authoring/generators" data-reactid="75"><h6 class="sc-iwsKbI hTJcdm" data-reactid="76">Generators</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="77"><a href="/docs/authoring/relationships" data-reactid="78"><h6 class="sc-iwsKbI hTJcdm" data-reactid="79">Relationships</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="80"><a href="/docs/authoring/abstractions" data-reactid="81"><h6 class="sc-iwsKbI hTJcdm" data-reactid="82">Abstractions</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="83"><a href="/docs/authoring/publishing" data-reactid="84"><h6 class="sc-iwsKbI hTJcdm" data-reactid="85">Publishing</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="86"><a href="/docs/authoring/extending-optic" data-reactid="87"><h6 class="sc-iwsKbI hTJcdm" data-reactid="88">Extending Optic</h6></a></li></ol></li><li class="sc-gZMcBi efHnSd" id="Teaching Optic" data-reactid="89"></li></ol><ol class="sc-htoDjs kTmsXR" data-reactid="90"><li class="head sc-gZMcBi efHnSd" id="head-Using Optic" data-reactid="91"><h5 class="sc-VigVT fshBww" data-reactid="92">Using Optic</h5><svg fill="currentColor" preserveAspectRatio="xMidYMid meet" height="1em" width="1em" viewBox="0 0 40 40" class="chevron chevron-open" id="chevron-Using Optic" style="vertical-align:middle;" data-reactid="93"><g data-reactid="94"><path d="m37.6 18l-16.6 16.6q-0.4 0.4-1 0.4t-1-0.4l-16.6-16.6q-0.4-0.4-0.4-1t0.4-1l3.7-3.7q0.5-0.4 1-0.4t1 0.4l11.9 11.9 11.9-11.9q0.4-0.4 1-0.4t1 0.4l3.7 3.7q0.4 0.4 0.4 1t-0.4 1z" data-reactid="95"></path></g></svg></li><li class="sc-gZMcBi efHnSd" id="list-Using Optic" data-reactid="96"><ol class="sc-dnqmqq hFnaBo" data-reactid="97"><li class="sc-gqjmRU iCEMyR" data-reactid="98"><a href="/docs/using/get-started" data-reactid="99"><h6 class="sc-iwsKbI hTJcdm" data-reactid="100">Get Started</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="101"><a href="/docs/using/workflow" data-reactid="102"><h6 class="sc-iwsKbI hTJcdm" data-reactid="103">Workflow</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="104"><a href="/docs/using/properties" data-reactid="105"><h6 class="sc-iwsKbI hTJcdm" data-reactid="106">Properties</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="107"><a href="/docs/using/search" data-reactid="108"><h6 class="sc-iwsKbI hTJcdm" data-reactid="109">Search</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="110"><a href="/docs/using/transforming-code-with-relationships" data-reactid="111"><h6 class="sc-iwsKbI hTJcdm" data-reactid="112">Transforming Code with Relationships</h6></a></li><li class="sc-gqjmRU iCEMyR" data-reactid="113"><a href="/docs/using/sync" data-reactid="114"><h6 class="sc-iwsKbI hTJcdm" data-reactid="115">Sync</h6></a></li></ol></li><li class="sc-gZMcBi efHnSd" id="Using Optic" data-reactid="116"></li></ol></div></div><div class="sc-jTzLTM fhRzEj" data-reactid="117"><div class="toc-main" data-reactid="118"><div data-reactid="119"><h5 class="sc-fjdhpX fxiKRU" data-reactid="120"><!-- react-text: 121 -->AUTHOR<!-- /react-text --><!-- react-text: 122 -->: <!-- /react-text --><!-- react-text: 123 -->Optic Team<!-- /react-text --></h5></div></div></div></div></div></div></div></div><script id="webpack-manifest">/*<![CDATA[*/window.webpackManifest={"231608221292675":"app-5a36b2b332795f507fb0.js","99219681209289":"component---node-modules-gatsby-plugin-offline-app-shell-js-5c4c5a0f7af9dc69d6d7.js","213130420965792":"component---src-templates-post-jsx-4e11bcc95864f64ba3df.js","112254247690605":"component---src-templates-lesson-jsx-772e29a295b5ea77ee8f.js","129745722219136":"component---src-templates-category-jsx-e95a2ab43b2b926045e0.js","186063380969677":"component---src-pages-blog-jsx-bd5143cca8b26303669b.js","155467094651736":"component---src-pages-download-jsx-560c62ea25764964cb51.js","213534597649335":"component---src-pages-index-jsx-836f00e7a94730fbe399.js","41479765680957":"component---src-pages-skills-jsx-c06259d944084c6221e1.js","183896347523440":"component---src-pages-teams-jsx-9f58abc2dc28efb0560f.js","60335399758886":"path----6611940bd40871b680a6.js","210333531512890":"path---offline-plugin-app-shell-fallback-586c7e095e534a3909ec.js","33848451909249":"path---blog-next-project-328f8e07cc31f83ba457.js","219796358021837":"path---blog-starting-the-public-beta-6d019af4214f395cfa13.js","37246892356048":"path---blog-advanced-transformations-f104e4bc227a59dd19ba.js","91216308360019":"path---blog-first-release-open-source-beta-plans-38e5441a923645086094.js","220276549955866":"path---blog-opm-live-7be9d64b7562fa3afedc.js","242684328019104":"path---blog-opm-auto-updating-9b9d484c99a96296d9c8.js","64647134414675":"path---blog-optic-markdown-cli-62650187220177149edb.js","207033415653983":"path---blog-finished-sync-27ef9c790b173310689d.js","126954225891828":"path---blog-1-0-launched-400c3bb829baac5368de.js","65122750110790":"path---blog-optic-installer-1243ab4839e991c4388c.js","1943878788376":"path---blog-starting-sync-b349c850da6f096b7a12.js","87632488690416":"path---blog-better-transformations-6292d2cb6fae5d5bf46d.js","241988407559908":"path---blog-scriptable-interface-and-multi-project-sync-00c7ab5a94cdf56c4efc.js","154319913138761":"path---blog-whats-next-for-optic-51555a400016a05ee252.js","271997990498460":"path---blog-skills-sdk-084f51677af260a2c834.js","96981484116314":"path---skills-generate-express-crud-routes-from-a-mongoose-model-3ef1eec0c22f02474426.js","222199532302830":"path---skills-generate-request-js-calls-for-every-route-in-an-express-backend-950f324e41dbeaa0db61.js","13815718468976":"path---docs-authoring-adding-optic-support-for-new-id-es-ae318fdb93e57110edb0.js","116810464517113":"path---docs-authoring-extending-optic-29cdf341fabb66f639f4.js","272108909471679":"path---docs-using-properties-1dcd4013736fc351d3db.js","161127120531176":"path---docs-using-sync-75d37983aa2627142cc2.js","274126399432635":"path---docs-using-workflow-179f8a216ce87faff028.js","248238044447976":"path---docs-authoring-what-are-optic-skills-8833cd4cd255764a35d3.js","267575277463257":"path---docs-authoring-generators-5d1d1087817442fbee64.js","217177696140476":"path---docs-authoring-abstractions-2cb0a4d28b684b9cbcf5.js","230318067145846":"path---docs-authoring-publishing-8defb13e2b46e526c0eb.js","170128383802128":"path---docs-authoring-relationships-b0068624f9ed51aa34de.js","14117618859859":"path---docs-using-get-started-138396019c7f542de69d.js","168993281860204":"path---docs-using-search-306ddf48cfb12f8baca5.js","199597057477506":"path---docs-using-transforming-code-with-relationships-420d1fa2b04a99e0f1f3.js","159073322833193":"path---docs-about-technical-overview-ba8b798e09057a6cac2d.js","69622577086375":"path---docs-about-why-optic-eda6123ad7d7f52fd3c7.js","47044606424611":"path---docs-about-another-code-generator-f86422344464469c3f39.js","86242794778721":"path---categories-tech-2084ff376d0f7aff5756.js","49683490770531":"path---blog-7c6fb03dd222caa84545.js","194151663809297":"path---download-586c7e095e534a3909ec.js","142629428675168":"path---index-6c3f23bb03912c844da0.js","152103125342432":"path---skills-586c7e095e534a3909ec.js","64831998229159":"path---teams-586c7e095e534a3909ec.js","79611799117203":"component---src-layouts-index-jsx-7a4017099845f4526de5.js"}/*]]>*/</script><script>
            
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-112777347-1', 'auto');
      }
      </script><script>
          window.twttr = (function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0],
    t = window.twttr || {};
  if (d.getElementById(id)) return t;
  js = d.createElement(s);
  js.id = id;
  js.src = "https://platform.twitter.com/widgets.js";
  fjs.parentNode.insertBefore(js, fjs);

  t._e = [];
  t.ready = function(f) {
    t._e.push(f);
  };

  return t;
}(document, "script", "twitter-wjs"));
      </script><script>/*<![CDATA[*/["/commons-a2102892feac76f8cd93.js","/app-5a36b2b332795f507fb0.js","/path---docs-authoring-generators-5d1d1087817442fbee64.js","/component---src-templates-lesson-jsx-772e29a295b5ea77ee8f.js","/component---src-layouts-index-jsx-7a4017099845f4526de5.js"].forEach(function(s){document.write('<script src="'+s+'" defer></'+'script>')})/*]]>*/</script><script>
              window.intercomSettings = {
               app_id: "xx7buah0"
              };
        </script><script>
            (function(){var w=window;var ic=w.Intercom;if(typeof ic==="function"){ic('reattach_activator');ic('update',intercomSettings);}else{var d=document;var i=function(){i.c(arguments)};i.q=[];i.c=function(args){i.q.push(args)};w.Intercom=i;function l(){var s=d.createElement('script');s.type='text/javascript';s.async=true;s.src='https://widget.intercom.io/widget/xx7buah0';var x=d.getElementsByTagName('script')[0];x.parentNode.insertBefore(s,x);}if(w.attachEvent){w.attachEvent('onload',l);}else{w.addEventListener('load',l,false);}}})()
        </script></body></html>
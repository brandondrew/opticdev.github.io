webpackJsonp([0xf35bb95d26d9],{460:function(n,s){n.exports={data:{postBySlug:{html:'<h1 id="creating-generators"><a href="#creating-generators" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating Generators</h1>\n<p>Optic Generators provide a programmatic interface for working with different kinds of code. When you create a generator with the SDK, you provide Optic with enough information to learn how to parse, mutate and generate a certain kind of code. </p>\n<p>An Optic generator for import statements might handle code of this form:\n<code class="language-text">const name = require(&#39;path/to/value&#39;)</code>. </p>\n<ol>\n<li>When parsing, Optic returns a model like this <code class="language-text">{definedAs: &#39;name&#39;, path: &#39;path/to/value&#39;}</code></li>\n<li>When mutating, Optic patches existing code to match an updated model provided by the user. <code class="language-text">{definedAs: &#39;newName&#39;, path: &#39;path/to/new&#39;}</code> -> <code class="language-text">const newName = require(&#39;path/to/new&#39;)</code> </li>\n<li>When generating, Optic takes a new model and writes code <code class="language-text">{definedAs: &#39;namevalue&#39;, path: &#39;optic&#39;}</code> -> <code class="language-text">const namevalue = require(&#39;optic&#39;)</code> </li>\n</ol>\n<p>We like to think of each Optic generator as an API for a certain kind of code. You can Get (parse), Post (generate), and Put (mutate) any code in your repo that has a corresponding Optic generator. </p>\n<p>To get started, you just need to decide what kind of code you want to a generator for and decide on an appropriate abstraction. For instance, if I wanted to create an Optic generator for my Express JS endpoints, it would make sense to use a data model like <code class="language-text">{url: String, method: Enum, parameters: [Parameter], responses: [Response]}</code> because when developers talk about an API, it\'s usually at that level of abstraction. </p>\n<h2 id="example-snippet"><a href="#example-snippet" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example Snippet</h2>\n<p>Every Optic generator begins with an example code snippet that Optic can use as a template. So in the above example, teaching Optic to work with API endpoints, we would start off by 1) importing the <code class="language-text">js</code> parser and then 2) providing a basic example:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span>js<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'optic-skills-sdk\'</span>\n\njs<span class="token template-string"><span class="token string">`\napp.get(\'url\', (req, res) => {\n\n})`</span></span>\n<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">\'Express Endpoint\'</span><span class="token punctuation">)</span>\n<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token string">\'express-endpoint\'</span><span class="token punctuation">)</span> </code></pre>\n      </div>\n<h2 id="the-abstraction"><a href="#the-abstraction" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>The Abstraction</h2>\n<p>We now need an abstract model that describes the example snippet. Since we\'re building a generator for an API endpoint we know we\'ll need a <code class="language-text">method</code> and a <code class="language-text">url</code> field so we\'ll start with those. </p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span>js<span class="token punctuation">,</span> literalWithValue<span class="token punctuation">,</span> tokenWithValue<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">\'optic-skills-sdk\'</span>\n\njs<span class="token template-string"><span class="token string">`\napp.get(\'url\', (req, res) => {\n\n})`</span></span>\n<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token string">\'Express Endpoint\'</span><span class="token punctuation">)</span>\n<span class="token punctuation">.</span><span class="token function">id</span><span class="token punctuation">(</span><span class="token string">\'express-endpoint\'</span><span class="token punctuation">)</span>\n<span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\tmethod<span class="token punctuation">:</span> <span class="token function">tokenWithValue</span><span class="token punctuation">(</span><span class="token string">\'get\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\turl<span class="token punctuation">:</span> <span class="token function">literalWithValue</span><span class="token punctuation">(</span><span class="token string">\'url\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>\n      </div>\n<p>Setting up an abstraction for a generator is done by constructing an object with a certain shape. You\'ll see that each field is assigned a value using the finder methods from by the SDK. A finder will look for a certain value in the example snippet, and learn to associate the AST node it\'s found in with that field.</p>\n<p><img src="../../../../new-docs/images/generator-value-relationship.png" alt="example relationship"></p>\n<p>These are the basic finders availible in the SDK: </p>\n<table>\n<thead>\n<tr>\n<th>Basic Finders</th>\n<th>usage</th>\n<th>returns</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>tokenWithValue(\'string\', {options})</td>\n<td>finds the token with value \'string\'</td>\n<td>string</td>\n</tr>\n<tr>\n<td>literalWithValue(bool</td>\n<td>string</td>\n<td>number, {options})</td>\n</tr>\n<tr>\n<td>arrayWithValue([], ...{options})</td>\n<td>finds the array literal with value</td>\n<td>[\nany\n]</td>\n</tr>\n<tr>\n<td>objectWithValue({}, ...{options})</td>\n<td>finds an object literal with value</td>\n<td>{any}</td>\n</tr>\n</tbody>\n</table>\n<blockquote>\n<p>options: 1) occurrence: Number - when multiple finder matches are found, occurrence lets you choose the one you want in the order they appear in the example snippet. </p>\n</blockquote>\n<p>So now when we give Optic the following examples, it knows how to parse them:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">\'url\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>  <span class="token comment">//interpreted as {"method": "get", "url": "url"}</span>\n\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\napp<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token string">\'/my/url\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>  <span class="token comment">//interpreted as {"method": "put", "url": "my/url"}</span>\n\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>\n      </div>\n<p>We can make this work for <code class="language-text">parameters</code> and <code class="language-text">responses</code> by stacking Optic generators on top of one another. This is done using more advanced finders. </p>\n<table>\n<thead>\n<tr>\n<th>Advanced Finders</th>\n<th>usage</th>\n<th>returns</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>collect(abstractionOrGenerator)</td>\n<td>finds all instances (a, a, b, c) of abstraction / generator and adds them to an array</td>\n<td>[\nabstraction\n]</td>\n</tr>\n<tr>\n<td>collectUnique(abstractionOrGenerator)</td>\n<td>finds all unique (a, b, c) instances of abstraction / generator and adds them to an array</td>\n<td>[\nabstraction\n]</td>\n</tr>\n<tr>\n<td>mapToObject(abstractionOrGenerator, keyField)</td>\n<td>finds all instances of abstraction / generator and add them to an object using takes field \'keyField\' as the key</td>\n<td>{key: abstraction, ...}</td>\n</tr>\n</tbody>\n</table>\n<p>Once we add the fields for <code class="language-text">parameters</code> and <code class="language-text">responses</code>, Optic will be able to understand a more complex example.</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">.</span><span class="token function">value</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\tmethod<span class="token punctuation">:</span> <span class="token function">tokenWithValue</span><span class="token punctuation">(</span><span class="token string">\'get\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\turl<span class="token punctuation">:</span> <span class="token function">literalWithValue</span><span class="token punctuation">(</span><span class="token string">\'url\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n\tparameters<span class="token punctuation">:</span> <span class="token function">collectUnique</span><span class="token punctuation">(</span>parametersGenerator<span class="token punctuation">)</span><span class="token punctuation">,</span>\n\tresponses<span class="token punctuation">:</span> <span class="token function">collectUnique</span><span class="token punctuation">(</span><span class="token string">\'optic:rest/response\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>\n      </div>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript">app<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token string">\'/hello-world\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>  \n\t<span class="token keyword">const</span> firstName <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>firstName\n\t<span class="token keyword">const</span> lastName <span class="token operator">=</span> req<span class="token punctuation">.</span>query<span class="token punctuation">.</span>lastName\n\tres<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>`Hello $<span class="token punctuation">{</span>firstName<span class="token punctuation">}</span> $<span class="token punctuation">{</span>lastName<span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n<span class="token comment">/* Parsed by Optic as \n{\n\t"method": "get",\n\t"url": "hello-world",\n\t"parameters": [\n\t\t{"in": "query", "name": "firstName"},\n\t\t{"in": "query", "name": "lastName"},\n\t],\n\t"responses": [\n\t\t{"code": 200, "type": "string"}\n\t]\n}\n*/</span></code></pre>\n      </div>\n<p>You can check out a complete <a href="https://github.com/opticdev/skills-sdk-examples/blob/master/express/src/endpoint.js">implimentation of this generator</a> and <a href="https://github.com/opticdev/skills-sdk-examples/blob/master/express/src/express.test.js">its spec</a>.</p>\n<h2 id="other-options"><a href="#other-options" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Other Options</h2>\n<h3 id="variables"><a href="#variables" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Variables</h3>\n<p>When you define a variable for your generator, it tells Optic that a token can have any value, as long as it is consistent throughout this section of code.</p>\n<p>For instance without a variable defined, all 3 instances of "result" must equal "result" for Optic to match this section of code.</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript">function test(result) {\n\tmessage.post(result)\n\tsystem.process(result)\n}</code></pre>\n      </div>\n<p>If you define a variable for "result" the following code will also be matched,</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript">function test(otherToken) {\n\tmessage.post(otherToken)\n\tsystem.process(otherToken)\n}</code></pre>\n      </div>\n<p>But this code would not be matched</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript">function test(otherToken) {\n\tmessage.post(otherToken)\n\tsystem.process(result)\n}</code></pre>\n      </div>\n<p>There are two types of variables. Those defined in <code class="language-text">self</code> and those in <code class="language-text">scope</code>.</p>\n<ul>\n<li><strong>self</strong> - enforces consistency of tokens in this node and its children</li>\n<li><strong>scope</strong> - If the node\'s parent also defines a variable with the same name then the value of this variable must match the one in its parent. If it\'s parent does not define a variable with the same name it behaves the same as <code class="language-text">self</code>.</li>\n</ul>\n<p>You can set variables like this: </p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">.</span><span class="token function">variables</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\tvariable1<span class="token punctuation">:</span> <span class="token string">\'self\'</span><span class="token punctuation">,</span>\n\tvariable2<span class="token punctuation">:</span> <span class="token string">\'scope\'</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>\n      </div>\n<h3 id="containers"><a href="#containers" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Containers</h3>\n<p>Containers can be used to label blocks of code and set rules about what kind of code can go inside of them. A container is defined in the example snippet by adding an inline comment with the following format <code class="language-text">//:{container name}</code>. </p>\n<p>For each container in your snippet a rule for how to handle its children can be defined:</p>\n<table>\n<thead>\n<tr>\n<th>name</th>\n<th>matches when</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>any</td>\n<td>always</td>\n</tr>\n<tr>\n<td>same-plus</td>\n<td>children from example snippet are present, in the order they appear in the example, plus any other children.  \n<br>\n example snippet = \n[\nA, B, C\n]\n \n<br>\n \n[\nB, C\n]\n false \n<br>\n \n[\nA, D, B, C\n]\n true \n<br>\n \n[\nA, B, C\n]\n true \n<br>\n \n[\nA, B, C, D\n]\n true</td>\n</tr>\n<tr>\n<td>same-plus-any-order</td>\n<td>children from the example snippet are present, in any order, plus any other children \n<br>\n example snippet = \n[\nA, B, C\n]\n \n<br>\n \n[\nC, B, D, E, A\n]\n true \n<br>\n \n[\nA, B, C\n]\n true \n<br>\n \n[\nC, B, D, E\n]\n false</td>\n</tr>\n<tr>\n<td>same-any-order</td>\n<td>all children from the example snippet are present, in any order,\n<br>\n example snippet = \n[\nA, B, C\n]\n \n<br>\n \n[\nB, C, A\n]\n true \n<br>\n \n[\nC, A, B\n]\n true \n<br>\n \n[\nC\n]\n false \n<br>\n \n[\nC, B, A, D\n]\n false</td>\n</tr>\n<tr>\n<td>exact</td>\n<td>children match those in the example snippet</td>\n</tr>\n</tbody>\n</table>\n<p>Here\'s how you configure containers with the SDK:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript">js<span class="token template-string"><span class="token string">`\nsendMessage(\'message\', (response) => {\n\t//:response handler\n}, (error) => {\n\t//:error handler\n\tthrow new ResponseError(error)\n})`</span></span>\n\n<span class="token punctuation">.</span><span class="token function">containers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\t<span class="token string">\'response handler\'</span><span class="token punctuation">:</span> <span class="token string">\'any\'</span>\n\t<span class="token string">\'error handler\'</span><span class="token punctuation">:</span> <span class="token string">\'same-plus\'</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>\n      </div>\n<p>Once the containers were configured, this example would still be recodnized as valid:</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">\'message\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n\t<span class="token function">alert</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n\t<span class="token function">retry</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span> <span class="token comment">// retry 3 times then throw</span>\n\t\t<span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ResponseError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>\n\t<span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>\n      </div>\n<p>and this one would not: </p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token string">\'message\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>response<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n\t<span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n\t<span class="token keyword">return</span> <span class="token boolean">false</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>\n      </div>\n<h3 id="customizing-abstraction"><a href="#customizing-abstraction" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Customizing Abstraction</h3>\n<p>By default, Optic determines a basic abstraction schema for your generator based on the fields and finders you use when configuring the generator. However, sometimes you might want to a) customize that schema or b) have this generator implement a shared abstraction. </p>\n<p>To customize the abstraction of your generator, just call <code class="language-text">.abstraction</code> and pass a valid draft-4 JSON Schema. Here\'s an example schema that would require <code class="language-text">in</code> to be one of the following values <code class="language-text">query, body, params, header</code>. </p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">.</span><span class="token function">abstraction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n\t<span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"object"</span><span class="token punctuation">,</span>\n\t<span class="token string">"required"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"in"</span><span class="token punctuation">,</span> <span class="token string">"name"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n\t<span class="token string">"properties"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>\n\t\t<span class="token string">"in"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>\n\t\t\t<span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>\n\t\t\t<span class="token string">"enum"</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"query"</span><span class="token punctuation">,</span> <span class="token string">"body"</span><span class="token punctuation">,</span> <span class="token string">"params"</span><span class="token punctuation">,</span> <span class="token string">"header"</span><span class="token punctuation">]</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">,</span>\n\t\t<span class="token string">"name"</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>\n\t\t\t<span class="token string">"type"</span><span class="token punctuation">:</span> <span class="token string">"string"</span>\n\t\t<span class="token punctuation">}</span>\n\t<span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>\n      </div>\n<p>If you want this generator to implement another abstraction just pass in the identifier. If the schema is coming from another package you need to add it to the dependencies section of your skill\'s declaration</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token punctuation">.</span><span class="token function">abstraction</span><span class="token punctuation">(</span><span class="token string">\'optic:rest/parameter\'</span><span class="token punctuation">)</span>\n\n<span class="token comment">//skill declaration </span>\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">Skill</span><span class="token punctuation">(</span><span class="token string">\'optic\'</span><span class="token punctuation">,</span> <span class="token string">\'testing\'</span><span class="token punctuation">,</span> <span class="token string">\'0.4.0\'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n\tdependencies<span class="token punctuation">:</span> <span class="token punctuation">{</span>\n\t\t<span class="token string">\'optic:rest\'</span><span class="token punctuation">:</span> <span class="token string">\'0.4.0\'</span>\n\t<span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>\n      </div>\n<h2 id="testing"><a href="#testing" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Testing</h2>\n<p>The Skills SDK makes it easy to write simple unit tests for your generators. To test a generator, first make sure it\'s registered withing the skill: </p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">Skill</span><span class="token punctuation">(</span><span class="token string">\'optic\'</span><span class="token punctuation">,</span> <span class="token string">\'testing\'</span><span class="token punctuation">,</span> <span class="token string">\'0.4.0\'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>\n\tgenerators<span class="token punctuation">:</span> <span class="token punctuation">[</span>parameterGenerator<span class="token punctuation">]</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>\n      </div>\n<p>Then get the test kit for the skill and the generator you want to test: </p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> skillTestKit <span class="token operator">=</span> <span class="token function">SkillTestKit</span><span class="token punctuation">(</span>exampleSkill<span class="token punctuation">)</span>\n<span class="token keyword">const</span> parameterTestKit <span class="token operator">=</span> skillTestKit<span class="token punctuation">.</span><span class="token function">testGenerator</span><span class="token punctuation">(</span><span class="token string">\'express-parameter\'</span><span class="token punctuation">)</span></code></pre>\n      </div>\n<p>You can test the functionality of the generator by calling: <code class="language-text">generate({input})</code>, <code class="language-text">mutate(&#39;rawcode&#39;, {newInput})</code>, and <code class="language-text">parse(&#39;rawcode&#39;)</code></p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">\'parameter generator\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n\t\t<span class="token keyword">const</span> skillTestKit <span class="token operator">=</span> <span class="token function">SkillTestKit</span><span class="token punctuation">(</span>exampleSkill<span class="token punctuation">)</span>\n\t\t<span class="token keyword">const</span> parametersTestKit <span class="token operator">=</span> expressSkillTestKit<span class="token punctuation">.</span><span class="token function">testGenerator</span><span class="token punctuation">(</span><span class="token string">\'express-parameter\'</span><span class="token punctuation">)</span>\n\t\t\n\t\t<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">\'can generate parameters\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n\t\t\t<span class="token keyword">const</span> result <span class="token operator">=</span> parametersTestKit<span class="token punctuation">.</span><span class="token function">generate</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token string">\'query\'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">\'testName\'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n\t\t\t<span class="token function">assert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>success<span class="token punctuation">)</span>\n\t\t\t<span class="token function">assert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">\'req.query.testName\'</span><span class="token punctuation">)</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n\t\t<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">\'can parse parameters\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n\t\t\t<span class="token keyword">const</span> result <span class="token operator">=</span> parametersTestKit<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">\'req.body.param\'</span><span class="token punctuation">)</span>\n\t\t\t<span class="token function">assert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>success<span class="token punctuation">)</span>\n\t\t\t<span class="token function">assert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token keyword">in</span> <span class="token operator">===</span> <span class="token string">\'body\'</span><span class="token punctuation">)</span>\n\t\t\t<span class="token function">assert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>value<span class="token punctuation">.</span>name <span class="token operator">===</span> <span class="token string">\'param\'</span><span class="token punctuation">)</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n\t\t<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">\'will not parse parameters with invalid "in" values\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n\t\t\t<span class="token keyword">const</span> result <span class="token operator">=</span> parametersTestKit<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token string">\'req.whazzzzup.param\'</span><span class="token punctuation">)</span>\n\t\t\t<span class="token function">assert</span><span class="token punctuation">(</span><span class="token operator">!</span>result<span class="token punctuation">.</span>success<span class="token punctuation">)</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n\t\t<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">\'can mutate parameters\'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>\n\t\t\t<span class="token keyword">const</span> result <span class="token operator">=</span> parametersTestKit<span class="token punctuation">.</span><span class="token function">mutate</span><span class="token punctuation">(</span><span class="token string">\'req.body.param\'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token keyword">in</span><span class="token punctuation">:</span> <span class="token string">\'query\'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>\n\t\t\t<span class="token function">assert</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>code <span class="token operator">===</span> <span class="token string">\'req.query.param\'</span><span class="token punctuation">)</span>\n\t\t<span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre>\n      </div>\n<p>Assuming your skill project was setup using <code class="language-text">opticsdk init</code>, you can run <code class="language-text">npm run test</code> to evaluate all the test suites in your project. </p>\n<h2 id="next-steps"><a href="#next-steps" aria-hidden="true" class="anchor"><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Next Steps</h2>\n<ul>\n<li>Learn about <a href="/docs/authoring/relationships/">Relationships</a></li>\n<li>Check out example <a href="https://github.com/opticdev/skills-sdk-examples/">Generators on GitHub</a></li>\n</ul>',
timeToRead:8,excerpt:"Creating Generators Optic Generators provide a programmatic interface for working with different kinds of code. When you create a generatorâ€¦",frontmatter:{title:"Generators",cover:null,date:null,category:null,tags:null}},tableOfContents:{chapters:[{title:"About Optic",entries:[{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/about/why-optic.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/about/why-optic"},frontmatter:{title:"Why Optic?",type:null}}}},{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/about/another-code-generator.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/about/another-code-generator"},frontmatter:{title:"Another Code Generator?",type:null}}}},{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/about/technical-overview.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/about/technical-overview"},frontmatter:{title:"Technical Overview",type:null}}}}]},{title:"Teaching Optic",entries:[{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/authoring/skills-overview.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/authoring/what-are-optic-skills"},frontmatter:{title:"What are Optic Skills?",type:null}}}},{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/authoring/creating-generators.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/authoring/generators"},frontmatter:{title:"Generators",type:null}}}},{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/authoring/creating-relationships.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/authoring/relationships"},frontmatter:{title:"Relationships",type:null}}}},{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/authoring/creating-abstractions.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/authoring/abstractions"},frontmatter:{title:"Abstractions",type:null}}}},{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/authoring/publishing.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/authoring/publishing"},frontmatter:{title:"Publishing",type:null}}}},{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/authoring/teaching-optic.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/authoring/extending-optic"},frontmatter:{title:"Extending Optic",type:null}}}}]},{title:"Using Optic",entries:[{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/using/get-started.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/using/get-started"},frontmatter:{title:"Get Started",type:null}}}},{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/using/workflow.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/using/workflow"},frontmatter:{title:"Workflow",type:null}}}},{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/using/properties.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/using/properties"},frontmatter:{title:"Properties",type:null}}}},{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/using/search.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/using/search"},frontmatter:{title:"Search",type:null}}}},{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/using/transform.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/using/transforming-code-with-relationships"},frontmatter:{title:"Transforming Code with Relationships",type:null}}}},{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/lessons/using/sync.md absPath of file",childMarkdownRemark:{fields:{slug:"/docs/using/sync"},frontmatter:{title:"Sync",type:null}}}}]}]},tableOfContentsSkills:{chapters:[{title:"Generate RequestJS calls for every route in an Express backend",entries:[{entry:{id:"/Users/aidancunniffe/Desktop/optic-homepage/content/skills/generate-requestjs.md absPath of file",childMarkdownRemark:{headings:[{value:"Generate RequestJS calls for every route in an Express backend",depth:1},{value:"Requirements",depth:2},{value:"Including Skills",depth:2},{value:"Our First Transform",depth:2},{value:"Generating Networking Calls from your Client Code",depth:2},{value:"Name and Source Annotations",depth:3},{value:"Syncing API & Networking Code",depth:2},{value:"Going Further",depth:2}],fields:{slug:"/skills/generate-request-js-calls-for-every-route-in-an-express-backend"},frontmatter:{title:"Generate RequestJS calls for every route in an Express backend",type:"skill"}}}}]}]}},pathContext:{slug:"/docs/authoring/generators",type:null}}}});
//# sourceMappingURL=path---docs-authoring-generators-5d1d1087817442fbee64.js.map